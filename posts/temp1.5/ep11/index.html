<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ° | Aura's Space</title><meta name=keywords content="LangChain,Python,LangGraph"><meta name=description content="

æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚


é›¶ã€ å‰è¨€
æ¥çºŒä¸Šæ¬¡æˆ‘å€‘èŠåˆ°çš„ Short-term Memory (çŸ­æœŸè¨˜æ†¶)ï¼Œæˆ‘å€‘é€é Checkpointer è®“ Agent èƒ½å¤ åœ¨åŒä¸€å€‹ Thread (å°è©±ä¸²) ä¸­è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œè§£æ±ºäº†ã€Œé‡‘é­šè…¦ã€çš„å•é¡Œã€‚
ä½†å•é¡Œä¾†äº†ï¼Œå¦‚æœä½¿ç”¨è€…é—œæ‰è¦–çª—ï¼Œæ˜å¤©é–‹å•Ÿä¸€å€‹æ–°çš„å°è©±ä¸² (New Thread) å‘¢ï¼Ÿ
åœ¨é è¨­æƒ…æ³ä¸‹ï¼ŒAgent æœƒæŠŠæ˜¨å¤©çš„äº‹å¿˜å¾—ä¸€ä¹¾äºŒæ·¨ã€‚é€™å°±åƒä½ æ¯å¤©å»åŒä¸€å®¶å’–å•¡å»³ï¼Œåº—å“¡å»æ¯å¤©éƒ½å•ä½ ï¼šã€Œå…ˆç”Ÿè²´å§“ï¼Ÿå–ä»€éº¼ï¼Ÿã€é€™é«”é©—è‚¯å®šä¸å¥½ã€‚
ç‚ºäº†è®“ Agent èƒ½å¤ è·¨è¶Šå°è©±ä¸²ï¼Œè¨˜ä½ä½¿ç”¨è€…çš„åå¥½ï¼ˆä¾‹å¦‚ï¼šåªè¬›ä¸­æ–‡ã€å–œæ­¡ç°¡çŸ­å›ç­”ï¼‰ï¼Œæˆ‘å€‘éœ€è¦å¼•å…¥ Long-term Memory (é•·æœŸè¨˜æ†¶)ã€‚ä»Šå¤©å°±ä¾†çœ‹çœ‹ LangChain æ–‡ä»¶ä¸­æåˆ°çš„ LangGraph Store æ©Ÿåˆ¶ã€‚

ä¸€ã€ é•·æœŸè¨˜æ†¶çš„æœ¬è³ªï¼šStore èˆ‡ JSON
ä¸åŒæ–¼çŸ­æœŸè¨˜æ†¶æ˜¯æŠŠå°è©±æ­·å² (Messages) å­˜èµ·ä¾†ï¼ŒLangChain å®šç¾©çš„é•·æœŸè¨˜æ†¶æ›´åƒæ˜¯ä¸€å€‹è³‡æ–™åº«ã€‚
æ ¹æ“šæ–‡ä»¶ï¼ŒLangGraph ä½¿ç”¨ Store ä¾†ä¿å­˜é€™äº›è¨˜æ†¶ï¼Œæ ¼å¼æ˜¯ JSON Documentsã€‚é€™è®“è¨˜æ†¶ä¸åƒ…åƒ…æ˜¯æ–‡å­—ï¼Œè€Œæ˜¯çµæ§‹åŒ–çš„è³‡æ–™ã€‚
æ ¸å¿ƒçµæ§‹ï¼šNamespace èˆ‡ Key
ç‚ºäº†ä¸è®“è¨˜æ†¶è®Šæˆä¸€åœ˜äº‚éº»ï¼ŒLangGraph æ¡ç”¨äº†é¡ä¼¼æª”æ¡ˆç³»çµ±çš„çµæ§‹ï¼š


Namespace (å‘½åç©ºé–“)ï¼š
é€™å°±åƒæ˜¯ã€Œè³‡æ–™å¤¾ã€ã€‚é€šå¸¸æœƒåŒ…å«ä½¿ç”¨è€… IDã€çµ„ç¹” ID æˆ–å…¶ä»–æ¨™ç±¤ã€‚

æ ¼å¼ç¯„ä¾‹ï¼š(user_id, application_context)
é€™è®“æˆ‘å€‘å¯ä»¥è¼•é¬†å€åˆ†ä¸åŒä½¿ç”¨è€…çš„è¨˜æ†¶ï¼Œç”šè‡³æ”¯æ´éšå±¤å¼çš„çµ„ç¹”ã€‚



Key (éµ)ï¼š
é€™å°±åƒæ˜¯ã€Œæª”åã€ã€‚åœ¨åŒä¸€å€‹ Namespace ä¸‹ï¼ŒKey å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚


é€™ç¨®çµæ§‹çš„å¼·å¤§ä¹‹è™•åœ¨æ–¼ï¼Œå®ƒæ”¯æ´ è·¨ Namespace æœå°‹ã€‚ä½ å¯ä»¥é€é Content Filters (å…§å®¹éæ¿¾) ä¾†æŸ¥æ‰¾ç‰¹å®šæ¢ä»¶çš„è¨˜æ†¶ã€‚"><meta name=author content="Aura"><link rel=canonical href=https://aura.codex.tw/posts/temp1.5/ep11/><link crossorigin=anonymous href=/assets/css/stylesheet.0a190288459736d4d10e13cb6ee8068b9aa282b3f8938264b3b2d6a98bf701b7.css integrity="sha256-ChkCiEWXNtTRDhPLbugGi5qigrP4k4Jks7LWqYv3Abc=" rel="preload stylesheet" as=style><link rel=icon href=https://aura.codex.tw/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aura.codex.tw/images/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://aura.codex.tw/images/favicon.ico><link rel=apple-touch-icon href=https://aura.codex.tw/images/favicon.ico><link rel=mask-icon href=https://aura.codex.tw/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://aura.codex.tw/posts/temp1.5/ep11/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://aura.codex.tw/posts/temp1.5/ep11/"><meta property="og:site_name" content="Aura's Space"><meta property="og:title" content="ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ°"><meta property="og:description" content=" æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚
é›¶ã€ å‰è¨€ æ¥çºŒä¸Šæ¬¡æˆ‘å€‘èŠåˆ°çš„ Short-term Memory (çŸ­æœŸè¨˜æ†¶)ï¼Œæˆ‘å€‘é€é Checkpointer è®“ Agent èƒ½å¤ åœ¨åŒä¸€å€‹ Thread (å°è©±ä¸²) ä¸­è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œè§£æ±ºäº†ã€Œé‡‘é­šè…¦ã€çš„å•é¡Œã€‚
ä½†å•é¡Œä¾†äº†ï¼Œå¦‚æœä½¿ç”¨è€…é—œæ‰è¦–çª—ï¼Œæ˜å¤©é–‹å•Ÿä¸€å€‹æ–°çš„å°è©±ä¸² (New Thread) å‘¢ï¼Ÿ åœ¨é è¨­æƒ…æ³ä¸‹ï¼ŒAgent æœƒæŠŠæ˜¨å¤©çš„äº‹å¿˜å¾—ä¸€ä¹¾äºŒæ·¨ã€‚é€™å°±åƒä½ æ¯å¤©å»åŒä¸€å®¶å’–å•¡å»³ï¼Œåº—å“¡å»æ¯å¤©éƒ½å•ä½ ï¼šã€Œå…ˆç”Ÿè²´å§“ï¼Ÿå–ä»€éº¼ï¼Ÿã€é€™é«”é©—è‚¯å®šä¸å¥½ã€‚
ç‚ºäº†è®“ Agent èƒ½å¤ è·¨è¶Šå°è©±ä¸²ï¼Œè¨˜ä½ä½¿ç”¨è€…çš„åå¥½ï¼ˆä¾‹å¦‚ï¼šåªè¬›ä¸­æ–‡ã€å–œæ­¡ç°¡çŸ­å›ç­”ï¼‰ï¼Œæˆ‘å€‘éœ€è¦å¼•å…¥ Long-term Memory (é•·æœŸè¨˜æ†¶)ã€‚ä»Šå¤©å°±ä¾†çœ‹çœ‹ LangChain æ–‡ä»¶ä¸­æåˆ°çš„ LangGraph Store æ©Ÿåˆ¶ã€‚
ä¸€ã€ é•·æœŸè¨˜æ†¶çš„æœ¬è³ªï¼šStore èˆ‡ JSON ä¸åŒæ–¼çŸ­æœŸè¨˜æ†¶æ˜¯æŠŠå°è©±æ­·å² (Messages) å­˜èµ·ä¾†ï¼ŒLangChain å®šç¾©çš„é•·æœŸè¨˜æ†¶æ›´åƒæ˜¯ä¸€å€‹è³‡æ–™åº«ã€‚
æ ¹æ“šæ–‡ä»¶ï¼ŒLangGraph ä½¿ç”¨ Store ä¾†ä¿å­˜é€™äº›è¨˜æ†¶ï¼Œæ ¼å¼æ˜¯ JSON Documentsã€‚é€™è®“è¨˜æ†¶ä¸åƒ…åƒ…æ˜¯æ–‡å­—ï¼Œè€Œæ˜¯çµæ§‹åŒ–çš„è³‡æ–™ã€‚
æ ¸å¿ƒçµæ§‹ï¼šNamespace èˆ‡ Key ç‚ºäº†ä¸è®“è¨˜æ†¶è®Šæˆä¸€åœ˜äº‚éº»ï¼ŒLangGraph æ¡ç”¨äº†é¡ä¼¼æª”æ¡ˆç³»çµ±çš„çµæ§‹ï¼š
Namespace (å‘½åç©ºé–“)ï¼š é€™å°±åƒæ˜¯ã€Œè³‡æ–™å¤¾ã€ã€‚é€šå¸¸æœƒåŒ…å«ä½¿ç”¨è€… IDã€çµ„ç¹” ID æˆ–å…¶ä»–æ¨™ç±¤ã€‚
æ ¼å¼ç¯„ä¾‹ï¼š(user_id, application_context) é€™è®“æˆ‘å€‘å¯ä»¥è¼•é¬†å€åˆ†ä¸åŒä½¿ç”¨è€…çš„è¨˜æ†¶ï¼Œç”šè‡³æ”¯æ´éšå±¤å¼çš„çµ„ç¹”ã€‚ Key (éµ)ï¼š é€™å°±åƒæ˜¯ã€Œæª”åã€ã€‚åœ¨åŒä¸€å€‹ Namespace ä¸‹ï¼ŒKey å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚
é€™ç¨®çµæ§‹çš„å¼·å¤§ä¹‹è™•åœ¨æ–¼ï¼Œå®ƒæ”¯æ´ è·¨ Namespace æœå°‹ã€‚ä½ å¯ä»¥é€é Content Filters (å…§å®¹éæ¿¾) ä¾†æŸ¥æ‰¾ç‰¹å®šæ¢ä»¶çš„è¨˜æ†¶ã€‚"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-10T00:00:00+00:00"><meta property="article:modified_time" content="2025-11-10T00:00:00+00:00"><meta property="article:tag" content="LangChain"><meta property="article:tag" content="Python"><meta property="article:tag" content="LangGraph"><meta name=twitter:card content="summary"><meta name=twitter:title content="ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ°"><meta name=twitter:description content="

æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚


é›¶ã€ å‰è¨€
æ¥çºŒä¸Šæ¬¡æˆ‘å€‘èŠåˆ°çš„ Short-term Memory (çŸ­æœŸè¨˜æ†¶)ï¼Œæˆ‘å€‘é€é Checkpointer è®“ Agent èƒ½å¤ åœ¨åŒä¸€å€‹ Thread (å°è©±ä¸²) ä¸­è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œè§£æ±ºäº†ã€Œé‡‘é­šè…¦ã€çš„å•é¡Œã€‚
ä½†å•é¡Œä¾†äº†ï¼Œå¦‚æœä½¿ç”¨è€…é—œæ‰è¦–çª—ï¼Œæ˜å¤©é–‹å•Ÿä¸€å€‹æ–°çš„å°è©±ä¸² (New Thread) å‘¢ï¼Ÿ
åœ¨é è¨­æƒ…æ³ä¸‹ï¼ŒAgent æœƒæŠŠæ˜¨å¤©çš„äº‹å¿˜å¾—ä¸€ä¹¾äºŒæ·¨ã€‚é€™å°±åƒä½ æ¯å¤©å»åŒä¸€å®¶å’–å•¡å»³ï¼Œåº—å“¡å»æ¯å¤©éƒ½å•ä½ ï¼šã€Œå…ˆç”Ÿè²´å§“ï¼Ÿå–ä»€éº¼ï¼Ÿã€é€™é«”é©—è‚¯å®šä¸å¥½ã€‚
ç‚ºäº†è®“ Agent èƒ½å¤ è·¨è¶Šå°è©±ä¸²ï¼Œè¨˜ä½ä½¿ç”¨è€…çš„åå¥½ï¼ˆä¾‹å¦‚ï¼šåªè¬›ä¸­æ–‡ã€å–œæ­¡ç°¡çŸ­å›ç­”ï¼‰ï¼Œæˆ‘å€‘éœ€è¦å¼•å…¥ Long-term Memory (é•·æœŸè¨˜æ†¶)ã€‚ä»Šå¤©å°±ä¾†çœ‹çœ‹ LangChain æ–‡ä»¶ä¸­æåˆ°çš„ LangGraph Store æ©Ÿåˆ¶ã€‚

ä¸€ã€ é•·æœŸè¨˜æ†¶çš„æœ¬è³ªï¼šStore èˆ‡ JSON
ä¸åŒæ–¼çŸ­æœŸè¨˜æ†¶æ˜¯æŠŠå°è©±æ­·å² (Messages) å­˜èµ·ä¾†ï¼ŒLangChain å®šç¾©çš„é•·æœŸè¨˜æ†¶æ›´åƒæ˜¯ä¸€å€‹è³‡æ–™åº«ã€‚
æ ¹æ“šæ–‡ä»¶ï¼ŒLangGraph ä½¿ç”¨ Store ä¾†ä¿å­˜é€™äº›è¨˜æ†¶ï¼Œæ ¼å¼æ˜¯ JSON Documentsã€‚é€™è®“è¨˜æ†¶ä¸åƒ…åƒ…æ˜¯æ–‡å­—ï¼Œè€Œæ˜¯çµæ§‹åŒ–çš„è³‡æ–™ã€‚
æ ¸å¿ƒçµæ§‹ï¼šNamespace èˆ‡ Key
ç‚ºäº†ä¸è®“è¨˜æ†¶è®Šæˆä¸€åœ˜äº‚éº»ï¼ŒLangGraph æ¡ç”¨äº†é¡ä¼¼æª”æ¡ˆç³»çµ±çš„çµæ§‹ï¼š


Namespace (å‘½åç©ºé–“)ï¼š
é€™å°±åƒæ˜¯ã€Œè³‡æ–™å¤¾ã€ã€‚é€šå¸¸æœƒåŒ…å«ä½¿ç”¨è€… IDã€çµ„ç¹” ID æˆ–å…¶ä»–æ¨™ç±¤ã€‚

æ ¼å¼ç¯„ä¾‹ï¼š(user_id, application_context)
é€™è®“æˆ‘å€‘å¯ä»¥è¼•é¬†å€åˆ†ä¸åŒä½¿ç”¨è€…çš„è¨˜æ†¶ï¼Œç”šè‡³æ”¯æ´éšå±¤å¼çš„çµ„ç¹”ã€‚



Key (éµ)ï¼š
é€™å°±åƒæ˜¯ã€Œæª”åã€ã€‚åœ¨åŒä¸€å€‹ Namespace ä¸‹ï¼ŒKey å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚


é€™ç¨®çµæ§‹çš„å¼·å¤§ä¹‹è™•åœ¨æ–¼ï¼Œå®ƒæ”¯æ´ è·¨ Namespace æœå°‹ã€‚ä½ å¯ä»¥é€é Content Filters (å…§å®¹éæ¿¾) ä¾†æŸ¥æ‰¾ç‰¹å®šæ¢ä»¶çš„è¨˜æ†¶ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aura.codex.tw/posts/"},{"@type":"ListItem","position":2,"name":"ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ°","item":"https://aura.codex.tw/posts/temp1.5/ep11/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ°","name":"ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ°","description":" æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚\né›¶ã€ å‰è¨€ æ¥çºŒä¸Šæ¬¡æˆ‘å€‘èŠåˆ°çš„ Short-term Memory (çŸ­æœŸè¨˜æ†¶)ï¼Œæˆ‘å€‘é€é Checkpointer è®“ Agent èƒ½å¤ åœ¨åŒä¸€å€‹ Thread (å°è©±ä¸²) ä¸­è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œè§£æ±ºäº†ã€Œé‡‘é­šè…¦ã€çš„å•é¡Œã€‚\nä½†å•é¡Œä¾†äº†ï¼Œå¦‚æœä½¿ç”¨è€…é—œæ‰è¦–çª—ï¼Œæ˜å¤©é–‹å•Ÿä¸€å€‹æ–°çš„å°è©±ä¸² (New Thread) å‘¢ï¼Ÿ åœ¨é è¨­æƒ…æ³ä¸‹ï¼ŒAgent æœƒæŠŠæ˜¨å¤©çš„äº‹å¿˜å¾—ä¸€ä¹¾äºŒæ·¨ã€‚é€™å°±åƒä½ æ¯å¤©å»åŒä¸€å®¶å’–å•¡å»³ï¼Œåº—å“¡å»æ¯å¤©éƒ½å•ä½ ï¼šã€Œå…ˆç”Ÿè²´å§“ï¼Ÿå–ä»€éº¼ï¼Ÿã€é€™é«”é©—è‚¯å®šä¸å¥½ã€‚\nç‚ºäº†è®“ Agent èƒ½å¤ è·¨è¶Šå°è©±ä¸²ï¼Œè¨˜ä½ä½¿ç”¨è€…çš„åå¥½ï¼ˆä¾‹å¦‚ï¼šåªè¬›ä¸­æ–‡ã€å–œæ­¡ç°¡çŸ­å›ç­”ï¼‰ï¼Œæˆ‘å€‘éœ€è¦å¼•å…¥ Long-term Memory (é•·æœŸè¨˜æ†¶)ã€‚ä»Šå¤©å°±ä¾†çœ‹çœ‹ LangChain æ–‡ä»¶ä¸­æåˆ°çš„ LangGraph Store æ©Ÿåˆ¶ã€‚\nä¸€ã€ é•·æœŸè¨˜æ†¶çš„æœ¬è³ªï¼šStore èˆ‡ JSON ä¸åŒæ–¼çŸ­æœŸè¨˜æ†¶æ˜¯æŠŠå°è©±æ­·å² (Messages) å­˜èµ·ä¾†ï¼ŒLangChain å®šç¾©çš„é•·æœŸè¨˜æ†¶æ›´åƒæ˜¯ä¸€å€‹è³‡æ–™åº«ã€‚\næ ¹æ“šæ–‡ä»¶ï¼ŒLangGraph ä½¿ç”¨ Store ä¾†ä¿å­˜é€™äº›è¨˜æ†¶ï¼Œæ ¼å¼æ˜¯ JSON Documentsã€‚é€™è®“è¨˜æ†¶ä¸åƒ…åƒ…æ˜¯æ–‡å­—ï¼Œè€Œæ˜¯çµæ§‹åŒ–çš„è³‡æ–™ã€‚\næ ¸å¿ƒçµæ§‹ï¼šNamespace èˆ‡ Key ç‚ºäº†ä¸è®“è¨˜æ†¶è®Šæˆä¸€åœ˜äº‚éº»ï¼ŒLangGraph æ¡ç”¨äº†é¡ä¼¼æª”æ¡ˆç³»çµ±çš„çµæ§‹ï¼š\nNamespace (å‘½åç©ºé–“)ï¼š é€™å°±åƒæ˜¯ã€Œè³‡æ–™å¤¾ã€ã€‚é€šå¸¸æœƒåŒ…å«ä½¿ç”¨è€… IDã€çµ„ç¹” ID æˆ–å…¶ä»–æ¨™ç±¤ã€‚\næ ¼å¼ç¯„ä¾‹ï¼š(user_id, application_context) é€™è®“æˆ‘å€‘å¯ä»¥è¼•é¬†å€åˆ†ä¸åŒä½¿ç”¨è€…çš„è¨˜æ†¶ï¼Œç”šè‡³æ”¯æ´éšå±¤å¼çš„çµ„ç¹”ã€‚ Key (éµ)ï¼š é€™å°±åƒæ˜¯ã€Œæª”åã€ã€‚åœ¨åŒä¸€å€‹ Namespace ä¸‹ï¼ŒKey å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚\né€™ç¨®çµæ§‹çš„å¼·å¤§ä¹‹è™•åœ¨æ–¼ï¼Œå®ƒæ”¯æ´ è·¨ Namespace æœå°‹ã€‚ä½ å¯ä»¥é€é Content Filters (å…§å®¹éæ¿¾) ä¾†æŸ¥æ‰¾ç‰¹å®šæ¢ä»¶çš„è¨˜æ†¶ã€‚\n","keywords":["LangChain","Python","LangGraph"],"articleBody":" æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚\né›¶ã€ å‰è¨€ æ¥çºŒä¸Šæ¬¡æˆ‘å€‘èŠåˆ°çš„ Short-term Memory (çŸ­æœŸè¨˜æ†¶)ï¼Œæˆ‘å€‘é€é Checkpointer è®“ Agent èƒ½å¤ åœ¨åŒä¸€å€‹ Thread (å°è©±ä¸²) ä¸­è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œè§£æ±ºäº†ã€Œé‡‘é­šè…¦ã€çš„å•é¡Œã€‚\nä½†å•é¡Œä¾†äº†ï¼Œå¦‚æœä½¿ç”¨è€…é—œæ‰è¦–çª—ï¼Œæ˜å¤©é–‹å•Ÿä¸€å€‹æ–°çš„å°è©±ä¸² (New Thread) å‘¢ï¼Ÿ åœ¨é è¨­æƒ…æ³ä¸‹ï¼ŒAgent æœƒæŠŠæ˜¨å¤©çš„äº‹å¿˜å¾—ä¸€ä¹¾äºŒæ·¨ã€‚é€™å°±åƒä½ æ¯å¤©å»åŒä¸€å®¶å’–å•¡å»³ï¼Œåº—å“¡å»æ¯å¤©éƒ½å•ä½ ï¼šã€Œå…ˆç”Ÿè²´å§“ï¼Ÿå–ä»€éº¼ï¼Ÿã€é€™é«”é©—è‚¯å®šä¸å¥½ã€‚\nç‚ºäº†è®“ Agent èƒ½å¤ è·¨è¶Šå°è©±ä¸²ï¼Œè¨˜ä½ä½¿ç”¨è€…çš„åå¥½ï¼ˆä¾‹å¦‚ï¼šåªè¬›ä¸­æ–‡ã€å–œæ­¡ç°¡çŸ­å›ç­”ï¼‰ï¼Œæˆ‘å€‘éœ€è¦å¼•å…¥ Long-term Memory (é•·æœŸè¨˜æ†¶)ã€‚ä»Šå¤©å°±ä¾†çœ‹çœ‹ LangChain æ–‡ä»¶ä¸­æåˆ°çš„ LangGraph Store æ©Ÿåˆ¶ã€‚\nä¸€ã€ é•·æœŸè¨˜æ†¶çš„æœ¬è³ªï¼šStore èˆ‡ JSON ä¸åŒæ–¼çŸ­æœŸè¨˜æ†¶æ˜¯æŠŠå°è©±æ­·å² (Messages) å­˜èµ·ä¾†ï¼ŒLangChain å®šç¾©çš„é•·æœŸè¨˜æ†¶æ›´åƒæ˜¯ä¸€å€‹è³‡æ–™åº«ã€‚\næ ¹æ“šæ–‡ä»¶ï¼ŒLangGraph ä½¿ç”¨ Store ä¾†ä¿å­˜é€™äº›è¨˜æ†¶ï¼Œæ ¼å¼æ˜¯ JSON Documentsã€‚é€™è®“è¨˜æ†¶ä¸åƒ…åƒ…æ˜¯æ–‡å­—ï¼Œè€Œæ˜¯çµæ§‹åŒ–çš„è³‡æ–™ã€‚\næ ¸å¿ƒçµæ§‹ï¼šNamespace èˆ‡ Key ç‚ºäº†ä¸è®“è¨˜æ†¶è®Šæˆä¸€åœ˜äº‚éº»ï¼ŒLangGraph æ¡ç”¨äº†é¡ä¼¼æª”æ¡ˆç³»çµ±çš„çµæ§‹ï¼š\nNamespace (å‘½åç©ºé–“)ï¼š é€™å°±åƒæ˜¯ã€Œè³‡æ–™å¤¾ã€ã€‚é€šå¸¸æœƒåŒ…å«ä½¿ç”¨è€… IDã€çµ„ç¹” ID æˆ–å…¶ä»–æ¨™ç±¤ã€‚\næ ¼å¼ç¯„ä¾‹ï¼š(user_id, application_context) é€™è®“æˆ‘å€‘å¯ä»¥è¼•é¬†å€åˆ†ä¸åŒä½¿ç”¨è€…çš„è¨˜æ†¶ï¼Œç”šè‡³æ”¯æ´éšå±¤å¼çš„çµ„ç¹”ã€‚ Key (éµ)ï¼š é€™å°±åƒæ˜¯ã€Œæª”åã€ã€‚åœ¨åŒä¸€å€‹ Namespace ä¸‹ï¼ŒKey å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚\né€™ç¨®çµæ§‹çš„å¼·å¤§ä¹‹è™•åœ¨æ–¼ï¼Œå®ƒæ”¯æ´ è·¨ Namespace æœå°‹ã€‚ä½ å¯ä»¥é€é Content Filters (å…§å®¹éæ¿¾) ä¾†æŸ¥æ‰¾ç‰¹å®šæ¢ä»¶çš„è¨˜æ†¶ã€‚\näºŒã€ åŸºç¤æ“ä½œï¼šPut, Get èˆ‡ Search æ–‡ä»¶æä¾›äº†ä¸€å€‹ä½¿ç”¨ InMemoryStore çš„ç¯„ä¾‹ï¼ˆæ³¨æ„ï¼šç”Ÿç”¢ç’°å¢ƒè«‹æ”¹ç”¨ DB-backed storeï¼‰ã€‚\né€™æ®µç¨‹å¼ç¢¼å±•ç¤ºäº†å¦‚ä½•åˆå§‹åŒ– Storeï¼Œä»¥åŠæœ€é‡è¦çš„ä¸‰å€‹å‹•ä½œï¼šå­˜ (Put)ã€å– (Get)ã€æœ (Search)ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 from langgraph.store.memory import InMemoryStore # é€™è£¡æ¨¡æ“¬ä¸€å€‹ Embedding å‡½æ•¸ï¼Œå¯¦æˆ°ä¸­è«‹æ›æˆçœŸæ­£çš„ OpenAI æˆ– HuggingFace Embeddings def embed(texts: list[str]) -\u003e list[list[float]]: return [[1.0, 2.0] * len(texts)] # åˆå§‹åŒ– Storeï¼Œé€™è£¡è¨­å®šäº† Embedding å‡½æ•¸ï¼Œä»£è¡¨å®ƒæ”¯æ´èªæ„æœå°‹ store = InMemoryStore(index={\"embed\": embed, \"dims\": 2}) user_id = \"my-user\" application_context = \"chitchat\" # å®šç¾© Namespaceï¼Œé€™æ˜¯ä¸€å€‹ tuple namespace = (user_id, application_context) # 1. å¯«å…¥è¨˜æ†¶ (Put) store.put( namespace, \"a-memory\", # Key { \"rules\": [ \"User likes short, direct language\", \"User only speaks English \u0026 python\", ], \"my-key\": \"my-value\", }, ) # 2. è®€å–è¨˜æ†¶ (Get) item = store.get(namespace, \"a-memory\") # 3. æœå°‹è¨˜æ†¶ (Search) # æ”¯æ´é€é filter éæ¿¾å…§å®¹ï¼Œä¸¦æ ¹æ“š query é€²è¡Œèªæ„ç›¸ä¼¼åº¦æ’åº items = store.search( namespace, filter={\"my-key\": \"my-value\"}, query=\"language preferences\" ) çœ‹åˆ° `query=\"language preferences\"` äº†å—ï¼Ÿé€™æ„å‘³è‘—å¦‚æœä½ çš„ Store æœ‰æ¥ Embedding Modelï¼ŒAgent æ˜¯å¯ä»¥é€éã€Œæ¨¡ç³Šæœå°‹ã€ä¾†å›æ†¶èµ·ç›¸é—œè³‡è¨Šçš„ï¼Œè€Œä¸åƒ…åƒ…æ˜¯æ­»æ¿çš„ Key-Value å°æ‡‰ã€‚\r---\r### ä¸‰ã€ è³¦äºˆ Agent è®€å–è¨˜æ†¶çš„èƒ½åŠ›\ræœ‰äº† Storeï¼ŒAgent è©²æ€éº¼ç”¨ï¼Ÿå®ƒä¸æœƒé€šéˆï¼Œæˆ‘ä»¬éœ€è¦çµ¦å®ƒ **Tools**ã€‚\råœ¨ LangChain çš„è¨­è¨ˆä¸­ï¼ŒTool å¯ä»¥é€é `ToolRuntime` ç›´æ¥å­˜å–å‚³éçµ¦ Agent çš„ Storeã€‚\ré€™æ˜¯ä¸€å€‹è®€å–ä½¿ç”¨è€…è³‡è¨Šçš„ Tool ç¯„ä¾‹ï¼š\r```python\rfrom langchain.tools import tool, ToolRuntime\rfrom dataclasses import dataclass\r@dataclass\rclass Context:\ruser_id: str\r@tool\rdef get_user_info(runtime: ToolRuntime[Context]) -\u003e str:\r\"\"\"Look up user info.\"\"\"\r# é€™è£¡å°±æ˜¯é—œéµï¼šé€é runtime.store æ‹¿åˆ° Store ç‰©ä»¶\rstore = runtime.store\ruser_id = runtime.context.user_id\r# å¾ (\"users\",) é€™å€‹ namespace å»æ‰¾ç•¶å‰ user_id çš„è³‡æ–™\ruser_info = store.get((\"users\",), user_id)\rreturn str(user_info.value) if user_info else \"Unknown user\"\r```\r**é‡é»ç­†è¨˜**ï¼š\rå»ºç«‹ Agent æ™‚ï¼Œå¿…é ˆæŠŠ `store` å‚³é€²å»ï¼Œé€™æ¨£ Tool åŸ·è¡Œæ™‚æ‰èƒ½é€é `runtime` æŠ“åˆ°å®ƒã€‚\r```python\ragent = create_agent(\rmodel=\"claude-sonnet-4-5-20250929\",\rtools=[get_user_info],\rstore=store, # \u003c--- è¨˜å¾—é€™è¡Œï¼Œä¸ç„¶ Tool æœƒå ±éŒ¯\rcontext_schema=Context\r)\r```\r---\r### å››ã€ è®“ Agent è‡ªè¡Œå¯«å…¥è¨˜æ†¶\ré™¤äº†è®€å–ï¼Œæ›´é‡è¦çš„æ˜¯è®“ Agent åœ¨å°è©±éç¨‹ä¸­ã€Œå­¸æœƒã€æ–°çŸ¥è­˜ä¸¦å­˜ä¸‹ä¾†ã€‚ä¾‹å¦‚ä½¿ç”¨è€…èªªï¼šã€Œæˆ‘å« John Smithã€ï¼ŒAgent æ‡‰è©²è‡ªå‹•å‘¼å«å·¥å…·æŠŠé€™ä»¶äº‹è¨˜ä¸‹ä¾†ã€‚\ré€™æ˜¯ä¸€å€‹å¯«å…¥è¨˜æ†¶çš„ Tool ç¯„ä¾‹ï¼š\r```python\rfrom typing_extensions import TypedDict\rclass UserInfo(TypedDict):\rname: str\r@tool\rdef save_user_info(user_info: UserInfo, runtime: ToolRuntime[Context]) -\u003e str:\r\"\"\"Save user info.\"\"\"\rstore = runtime.store\ruser_id = runtime.context.user_id\r# é€é store.put æ›´æ–°è³‡æ–™\r# Namespace æ˜¯ (\"users\",)ï¼ŒKey æ˜¯ user_id\rstore.put((\"users\",), user_id, user_info)\rreturn \"Successfully saved user info.\"\r```\rç•¶ Agent åŸ·è¡Œé€™å€‹ Tool å¾Œï¼Œè³‡æ–™å°±è¢«æŒä¹…åŒ–åˆ° Store è£¡äº†ã€‚å³ä½¿é€™å€‹å°è©±çµæŸ (Thread çµæŸ)ï¼Œä¸‹æ¬¡åªè¦ç”¨åŒæ¨£çš„ `user_id` æŸ¥è©¢ Storeï¼ŒAgent ä¾ç„¶çŸ¥é“ä½ æ˜¯ John Smithã€‚\ré©—è­‰æ–¹å¼å¾ˆç°¡å–®ï¼Œç›´æ¥å» Store æ’ˆæ’ˆçœ‹ï¼š\r```python\r# é©—è­‰è³‡æ–™æ˜¯å¦å¯«å…¥\rprint(store.get((\"users\",), \"user_123\").value)\r# é æœŸè¼¸å‡º: {'name': 'John Smith'}\r```\r---\r### äº”ã€ çµèª\rLangChain çš„ Long-term Memory æ©Ÿåˆ¶å…¶å¯¦æ˜¯å°‡è¨˜æ†¶ç®¡ç†ã€Œå¤–åŒ…ã€çµ¦äº† **LangGraph Store**ã€‚\r1. **çµæ§‹åŒ–**ï¼šä½¿ç”¨ JSON å„²å­˜ï¼Œé…åˆ Namespace èˆ‡ Key ç®¡ç†ã€‚\r2. **å·¥å…·åŒ–**ï¼šé€é Tool ä¾†è®€å¯«ï¼Œè®“ LLM è‡ªè¡Œæ±ºå®šä½•æ™‚è©²è¨˜ä½ã€ä½•æ™‚è©²å›æ†¶ã€‚\r3. **èªæ„åŒ–**ï¼šæ”¯æ´ Embedding èˆ‡ Vector Searchï¼Œè®“è¨˜æ†¶æŸ¥æ‰¾æ›´éˆæ´»ã€‚\rå€åˆ†æ¸…æ¥š **Short-term (Thread/Checkpointer)** èˆ‡ **Long-term (Store)** çš„å·®ç•°ï¼Œæ˜¯æ‰“é€ è°æ˜ Agent çš„é—œéµã€‚å‰è€…è² è²¬ã€ŒæŠŠè©±èŠå¥½ã€ï¼Œå¾Œè€…è² è²¬ã€ŒæŠŠäººè¨˜ä½ã€ã€‚\ræœ‰äº†é€™å€‹æ©Ÿåˆ¶ï¼Œä½ çš„ Agent å°±ä¸å†æ˜¯æ¯æ¬¡è¦‹é¢éƒ½å¤±æ†¶çš„åˆæˆ€æƒ…äººï¼Œè€Œæ˜¯èƒ½è¨˜ä½ä½ å–œå¥½çš„è²¼èº«ç®¡å®¶äº†ã€‚ ","wordCount":"478","inLanguage":"en","datePublished":"2025-11-10T00:00:00Z","dateModified":"2025-11-10T00:00:00Z","author":{"@type":"Person","name":"Aura"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://aura.codex.tw/posts/temp1.5/ep11/"},"publisher":{"@type":"Organization","name":"Aura's Space","logo":{"@type":"ImageObject","url":"https://aura.codex.tw/images/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://aura.codex.tw/ accesskey=h title="Aura's Space (Alt + H)"><img src=https://aura.codex.tw/images/favicon.ico alt aria-label=logo height=35>Aura's Space</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://aura.codex.tw/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://aura.codex.tw/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://aura.codex.tw/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://aura.codex.tw/about/ title=About><span>About</span></a></li><li><a href=https://aura.codex.tw/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://aura.codex.tw/>Home</a>&nbsp;Â»&nbsp;<a href=https://aura.codex.tw/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP11: ç©¿è¶Šæ™‚ç©ºçš„è¨˜æ†¶ - LangChain Long-term Memory èˆ‡ Store å¯¦æˆ°</h1><div class=post-meta><span title='2025-11-10 00:00:00 +0000 UTC'>November 10, 2025</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>Aura</span></div></header><ul class=post-tags><li><a href=https://aura.codex.tw/tags/langchain/>LangChain</a></li><li><a href=https://aura.codex.tw/tags/python/>Python</a></li><li><a href=https://aura.codex.tw/tags/langgraph/>LangGraph</a></li></ul><div class=post-content><hr><blockquote><p>æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚</p></blockquote><hr><h3 id=é›¶-å‰è¨€>é›¶ã€ å‰è¨€<a hidden class=anchor aria-hidden=true href=#é›¶-å‰è¨€>#</a></h3><p>æ¥çºŒä¸Šæ¬¡æˆ‘å€‘èŠåˆ°çš„ <strong>Short-term Memory (çŸ­æœŸè¨˜æ†¶)</strong>ï¼Œæˆ‘å€‘é€é Checkpointer è®“ Agent èƒ½å¤ åœ¨åŒä¸€å€‹ Thread (å°è©±ä¸²) ä¸­è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œè§£æ±ºäº†ã€Œé‡‘é­šè…¦ã€çš„å•é¡Œã€‚</p><p>ä½†å•é¡Œä¾†äº†ï¼Œå¦‚æœä½¿ç”¨è€…é—œæ‰è¦–çª—ï¼Œæ˜å¤©é–‹å•Ÿä¸€å€‹<strong>æ–°çš„å°è©±ä¸² (New Thread)</strong> å‘¢ï¼Ÿ
åœ¨é è¨­æƒ…æ³ä¸‹ï¼ŒAgent æœƒæŠŠæ˜¨å¤©çš„äº‹å¿˜å¾—ä¸€ä¹¾äºŒæ·¨ã€‚é€™å°±åƒä½ æ¯å¤©å»åŒä¸€å®¶å’–å•¡å»³ï¼Œåº—å“¡å»æ¯å¤©éƒ½å•ä½ ï¼šã€Œå…ˆç”Ÿè²´å§“ï¼Ÿå–ä»€éº¼ï¼Ÿã€é€™é«”é©—è‚¯å®šä¸å¥½ã€‚</p><p>ç‚ºäº†è®“ Agent èƒ½å¤ è·¨è¶Šå°è©±ä¸²ï¼Œè¨˜ä½ä½¿ç”¨è€…çš„åå¥½ï¼ˆä¾‹å¦‚ï¼šåªè¬›ä¸­æ–‡ã€å–œæ­¡ç°¡çŸ­å›ç­”ï¼‰ï¼Œæˆ‘å€‘éœ€è¦å¼•å…¥ <strong>Long-term Memory (é•·æœŸè¨˜æ†¶)</strong>ã€‚ä»Šå¤©å°±ä¾†çœ‹çœ‹ LangChain æ–‡ä»¶ä¸­æåˆ°çš„ <strong>LangGraph Store</strong> æ©Ÿåˆ¶ã€‚</p><hr><h3 id=ä¸€-é•·æœŸè¨˜æ†¶çš„æœ¬è³ªstore-èˆ‡-json>ä¸€ã€ é•·æœŸè¨˜æ†¶çš„æœ¬è³ªï¼šStore èˆ‡ JSON<a hidden class=anchor aria-hidden=true href=#ä¸€-é•·æœŸè¨˜æ†¶çš„æœ¬è³ªstore-èˆ‡-json>#</a></h3><p>ä¸åŒæ–¼çŸ­æœŸè¨˜æ†¶æ˜¯æŠŠå°è©±æ­·å² (Messages) å­˜èµ·ä¾†ï¼ŒLangChain å®šç¾©çš„é•·æœŸè¨˜æ†¶æ›´åƒæ˜¯ä¸€å€‹è³‡æ–™åº«ã€‚</p><p>æ ¹æ“šæ–‡ä»¶ï¼ŒLangGraph ä½¿ç”¨ <strong>Store</strong> ä¾†ä¿å­˜é€™äº›è¨˜æ†¶ï¼Œæ ¼å¼æ˜¯ <strong>JSON Documents</strong>ã€‚é€™è®“è¨˜æ†¶ä¸åƒ…åƒ…æ˜¯æ–‡å­—ï¼Œè€Œæ˜¯çµæ§‹åŒ–çš„è³‡æ–™ã€‚</p><h4 id=æ ¸å¿ƒçµæ§‹namespace-èˆ‡-key>æ ¸å¿ƒçµæ§‹ï¼šNamespace èˆ‡ Key<a hidden class=anchor aria-hidden=true href=#æ ¸å¿ƒçµæ§‹namespace-èˆ‡-key>#</a></h4><p>ç‚ºäº†ä¸è®“è¨˜æ†¶è®Šæˆä¸€åœ˜äº‚éº»ï¼ŒLangGraph æ¡ç”¨äº†é¡ä¼¼æª”æ¡ˆç³»çµ±çš„çµæ§‹ï¼š</p><ol><li><p><strong>Namespace (å‘½åç©ºé–“)</strong>ï¼š
é€™å°±åƒæ˜¯ã€Œè³‡æ–™å¤¾ã€ã€‚é€šå¸¸æœƒåŒ…å«ä½¿ç”¨è€… IDã€çµ„ç¹” ID æˆ–å…¶ä»–æ¨™ç±¤ã€‚</p><ul><li>æ ¼å¼ç¯„ä¾‹ï¼š<code>(user_id, application_context)</code></li><li>é€™è®“æˆ‘å€‘å¯ä»¥è¼•é¬†å€åˆ†ä¸åŒä½¿ç”¨è€…çš„è¨˜æ†¶ï¼Œç”šè‡³æ”¯æ´éšå±¤å¼çš„çµ„ç¹”ã€‚</li></ul></li><li><p><strong>Key (éµ)</strong>ï¼š
é€™å°±åƒæ˜¯ã€Œæª”åã€ã€‚åœ¨åŒä¸€å€‹ Namespace ä¸‹ï¼ŒKey å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚</p></li></ol><p>é€™ç¨®çµæ§‹çš„å¼·å¤§ä¹‹è™•åœ¨æ–¼ï¼Œå®ƒæ”¯æ´ <strong>è·¨ Namespace æœå°‹</strong>ã€‚ä½ å¯ä»¥é€é Content Filters (å…§å®¹éæ¿¾) ä¾†æŸ¥æ‰¾ç‰¹å®šæ¢ä»¶çš„è¨˜æ†¶ã€‚</p><hr><h3 id=äºŒ-åŸºç¤æ“ä½œput-get-èˆ‡-search>äºŒã€ åŸºç¤æ“ä½œï¼šPut, Get èˆ‡ Search<a hidden class=anchor aria-hidden=true href=#äºŒ-åŸºç¤æ“ä½œput-get-èˆ‡-search>#</a></h3><p>æ–‡ä»¶æä¾›äº†ä¸€å€‹ä½¿ç”¨ <code>InMemoryStore</code> çš„ç¯„ä¾‹ï¼ˆæ³¨æ„ï¼šç”Ÿç”¢ç’°å¢ƒè«‹æ”¹ç”¨ DB-backed storeï¼‰ã€‚</p><p>é€™æ®µç¨‹å¼ç¢¼å±•ç¤ºäº†å¦‚ä½•åˆå§‹åŒ– Storeï¼Œä»¥åŠæœ€é‡è¦çš„ä¸‰å€‹å‹•ä½œï¼šå­˜ (Put)ã€å– (Get)ã€æœ (Search)ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langgraph.store.memory</span> <span class=kn>import</span> <span class=n>InMemoryStore</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™è£¡æ¨¡æ“¬ä¸€å€‹ Embedding å‡½æ•¸ï¼Œå¯¦æˆ°ä¸­è«‹æ›æˆçœŸæ­£çš„ OpenAI æˆ– HuggingFace Embeddings</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>embed</span><span class=p>(</span><span class=n>texts</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>list</span><span class=p>[</span><span class=nb>float</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[[</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>]</span> <span class=o>*</span> <span class=nb>len</span><span class=p>(</span><span class=n>texts</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆå§‹åŒ– Storeï¼Œé€™è£¡è¨­å®šäº† Embedding å‡½æ•¸ï¼Œä»£è¡¨å®ƒæ”¯æ´èªæ„æœå°‹</span>
</span></span><span class=line><span class=cl><span class=n>store</span> <span class=o>=</span> <span class=n>InMemoryStore</span><span class=p>(</span><span class=n>index</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;embed&#34;</span><span class=p>:</span> <span class=n>embed</span><span class=p>,</span> <span class=s2>&#34;dims&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>user_id</span> <span class=o>=</span> <span class=s2>&#34;my-user&#34;</span>
</span></span><span class=line><span class=cl><span class=n>application_context</span> <span class=o>=</span> <span class=s2>&#34;chitchat&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># å®šç¾© Namespaceï¼Œé€™æ˜¯ä¸€å€‹ tuple</span>
</span></span><span class=line><span class=cl><span class=n>namespace</span> <span class=o>=</span> <span class=p>(</span><span class=n>user_id</span><span class=p>,</span> <span class=n>application_context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. å¯«å…¥è¨˜æ†¶ (Put)</span>
</span></span><span class=line><span class=cl><span class=n>store</span><span class=o>.</span><span class=n>put</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>namespace</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;a-memory&#34;</span><span class=p>,</span> <span class=c1># Key</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;User likes short, direct language&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;User only speaks English &amp; python&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;my-key&#34;</span><span class=p>:</span> <span class=s2>&#34;my-value&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. è®€å–è¨˜æ†¶ (Get)</span>
</span></span><span class=line><span class=cl><span class=n>item</span> <span class=o>=</span> <span class=n>store</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>namespace</span><span class=p>,</span> <span class=s2>&#34;a-memory&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. æœå°‹è¨˜æ†¶ (Search)</span>
</span></span><span class=line><span class=cl><span class=c1># æ”¯æ´é€é filter éæ¿¾å…§å®¹ï¼Œä¸¦æ ¹æ“š query é€²è¡Œèªæ„ç›¸ä¼¼åº¦æ’åº</span>
</span></span><span class=line><span class=cl><span class=n>items</span> <span class=o>=</span> <span class=n>store</span><span class=o>.</span><span class=n>search</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>namespace</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nb>filter</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;my-key&#34;</span><span class=p>:</span> <span class=s2>&#34;my-value&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>query</span><span class=o>=</span><span class=s2>&#34;language preferences&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><pre tabindex=0><code>
çœ‹åˆ° `query=&#34;language preferences&#34;` äº†å—ï¼Ÿé€™æ„å‘³è‘—å¦‚æœä½ çš„ Store æœ‰æ¥ Embedding Modelï¼ŒAgent æ˜¯å¯ä»¥é€éã€Œæ¨¡ç³Šæœå°‹ã€ä¾†å›æ†¶èµ·ç›¸é—œè³‡è¨Šçš„ï¼Œè€Œä¸åƒ…åƒ…æ˜¯æ­»æ¿çš„ Key-Value å°æ‡‰ã€‚

---

### ä¸‰ã€ è³¦äºˆ Agent è®€å–è¨˜æ†¶çš„èƒ½åŠ›

æœ‰äº† Storeï¼ŒAgent è©²æ€éº¼ç”¨ï¼Ÿå®ƒä¸æœƒé€šéˆï¼Œæˆ‘ä»¬éœ€è¦çµ¦å®ƒ **Tools**ã€‚

åœ¨ LangChain çš„è¨­è¨ˆä¸­ï¼ŒTool å¯ä»¥é€é `ToolRuntime` ç›´æ¥å­˜å–å‚³éçµ¦ Agent çš„ Storeã€‚

é€™æ˜¯ä¸€å€‹è®€å–ä½¿ç”¨è€…è³‡è¨Šçš„ Tool ç¯„ä¾‹ï¼š

```python
from langchain.tools import tool, ToolRuntime
from dataclasses import dataclass

@dataclass
class Context:
    user_id: str

@tool
def get_user_info(runtime: ToolRuntime[Context]) -&gt; str:
    &#34;&#34;&#34;Look up user info.&#34;&#34;&#34;
    # é€™è£¡å°±æ˜¯é—œéµï¼šé€é runtime.store æ‹¿åˆ° Store ç‰©ä»¶
    store = runtime.store
    user_id = runtime.context.user_id

    # å¾ (&#34;users&#34;,) é€™å€‹ namespace å»æ‰¾ç•¶å‰ user_id çš„è³‡æ–™
    user_info = store.get((&#34;users&#34;,), user_id)

    return str(user_info.value) if user_info else &#34;Unknown user&#34;

```

**é‡é»ç­†è¨˜**ï¼š
å»ºç«‹ Agent æ™‚ï¼Œå¿…é ˆæŠŠ `store` å‚³é€²å»ï¼Œé€™æ¨£ Tool åŸ·è¡Œæ™‚æ‰èƒ½é€é `runtime` æŠ“åˆ°å®ƒã€‚

```python
agent = create_agent(
    model=&#34;claude-sonnet-4-5-20250929&#34;,
    tools=[get_user_info],
    store=store, # &lt;--- è¨˜å¾—é€™è¡Œï¼Œä¸ç„¶ Tool æœƒå ±éŒ¯
    context_schema=Context
)

```

---

### å››ã€ è®“ Agent è‡ªè¡Œå¯«å…¥è¨˜æ†¶

é™¤äº†è®€å–ï¼Œæ›´é‡è¦çš„æ˜¯è®“ Agent åœ¨å°è©±éç¨‹ä¸­ã€Œå­¸æœƒã€æ–°çŸ¥è­˜ä¸¦å­˜ä¸‹ä¾†ã€‚ä¾‹å¦‚ä½¿ç”¨è€…èªªï¼šã€Œæˆ‘å« John Smithã€ï¼ŒAgent æ‡‰è©²è‡ªå‹•å‘¼å«å·¥å…·æŠŠé€™ä»¶äº‹è¨˜ä¸‹ä¾†ã€‚

é€™æ˜¯ä¸€å€‹å¯«å…¥è¨˜æ†¶çš„ Tool ç¯„ä¾‹ï¼š

```python
from typing_extensions import TypedDict

class UserInfo(TypedDict):
    name: str

@tool
def save_user_info(user_info: UserInfo, runtime: ToolRuntime[Context]) -&gt; str:
    &#34;&#34;&#34;Save user info.&#34;&#34;&#34;
    store = runtime.store
    user_id = runtime.context.user_id

    # é€é store.put æ›´æ–°è³‡æ–™
    # Namespace æ˜¯ (&#34;users&#34;,)ï¼ŒKey æ˜¯ user_id
    store.put((&#34;users&#34;,), user_id, user_info)

    return &#34;Successfully saved user info.&#34;

```

ç•¶ Agent åŸ·è¡Œé€™å€‹ Tool å¾Œï¼Œè³‡æ–™å°±è¢«æŒä¹…åŒ–åˆ° Store è£¡äº†ã€‚å³ä½¿é€™å€‹å°è©±çµæŸ (Thread çµæŸ)ï¼Œä¸‹æ¬¡åªè¦ç”¨åŒæ¨£çš„ `user_id` æŸ¥è©¢ Storeï¼ŒAgent ä¾ç„¶çŸ¥é“ä½ æ˜¯ John Smithã€‚

é©—è­‰æ–¹å¼å¾ˆç°¡å–®ï¼Œç›´æ¥å» Store æ’ˆæ’ˆçœ‹ï¼š

```python
# é©—è­‰è³‡æ–™æ˜¯å¦å¯«å…¥
print(store.get((&#34;users&#34;,), &#34;user_123&#34;).value)
# é æœŸè¼¸å‡º: {&#39;name&#39;: &#39;John Smith&#39;}

```

---

### äº”ã€ çµèª

LangChain çš„ Long-term Memory æ©Ÿåˆ¶å…¶å¯¦æ˜¯å°‡è¨˜æ†¶ç®¡ç†ã€Œå¤–åŒ…ã€çµ¦äº† **LangGraph Store**ã€‚

1. **çµæ§‹åŒ–**ï¼šä½¿ç”¨ JSON å„²å­˜ï¼Œé…åˆ Namespace èˆ‡ Key ç®¡ç†ã€‚
2. **å·¥å…·åŒ–**ï¼šé€é Tool ä¾†è®€å¯«ï¼Œè®“ LLM è‡ªè¡Œæ±ºå®šä½•æ™‚è©²è¨˜ä½ã€ä½•æ™‚è©²å›æ†¶ã€‚
3. **èªæ„åŒ–**ï¼šæ”¯æ´ Embedding èˆ‡ Vector Searchï¼Œè®“è¨˜æ†¶æŸ¥æ‰¾æ›´éˆæ´»ã€‚

å€åˆ†æ¸…æ¥š **Short-term (Thread/Checkpointer)** èˆ‡ **Long-term (Store)** çš„å·®ç•°ï¼Œæ˜¯æ‰“é€ è°æ˜ Agent çš„é—œéµã€‚å‰è€…è² è²¬ã€ŒæŠŠè©±èŠå¥½ã€ï¼Œå¾Œè€…è² è²¬ã€ŒæŠŠäººè¨˜ä½ã€ã€‚

æœ‰äº†é€™å€‹æ©Ÿåˆ¶ï¼Œä½ çš„ Agent å°±ä¸å†æ˜¯æ¯æ¬¡è¦‹é¢éƒ½å¤±æ†¶çš„åˆæˆ€æƒ…äººï¼Œè€Œæ˜¯èƒ½è¨˜ä½ä½ å–œå¥½çš„è²¼èº«ç®¡å®¶äº†ã€‚
</code></pre></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022~2026 <a href=https://aura.codex.tw/>Aura's Space</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>