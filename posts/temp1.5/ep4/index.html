<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ | Aura's Space</title><meta name=keywords content="LangChain,Python"><meta name=description content="

æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚


é›¶ã€ å‰è¨€
æ¥çºŒä¸Šæ¬¡é—œæ–¼ Tools çš„è¨è«–ï¼Œç•¶æˆ‘å€‘è³¦äºˆäº† Agent é›™æ‰‹å»åŸ·è¡Œä»»å‹™å¾Œï¼Œä¸‹ä¸€å€‹é¢è‡¨çš„å•é¡Œå°±æ˜¯ã€Œç­‰å¾…ã€ã€‚LLM ç”Ÿæˆå›æ‡‰éœ€è¦æ™‚é–“ï¼Œå°¤å…¶æ˜¯ç•¶ä»»å‹™æ¶‰åŠå¤šå€‹å·¥å…·èª¿ç”¨æ™‚ï¼Œæ¼«é•·çš„ç©ºç™½ç­‰å¾…æœƒæ¯€æ‰ä½¿ç”¨è€…é«”é©—ã€‚å› æ­¤ï¼Œæœ¬ç¯‡è¦ä¾†èŠèŠ LangChain çš„ Streaming (ä¸²æµ) ç³»çµ±ï¼Œé€™æ˜¯æå‡æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰é€Ÿåº¦èˆ‡ä½¿ç”¨è€…é«”é©— (UX) çš„æ ¸å¿ƒæŠ€è¡“ã€‚
ä¸€ã€ ç‚ºä»€éº¼éœ€è¦ä¸²æµï¼Ÿ
åœ¨ LLM çš„æ‡‰ç”¨ä¸­ï¼Œå»¶é² (Latency) æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸²æµæŠ€è¡“å…è¨±æˆ‘å€‘åœ¨å®Œæ•´å›æ‡‰æº–å‚™å¥½ä¹‹å‰ï¼Œå°±å…ˆå°‡ä¸­é–“éç¨‹èˆ‡éƒ¨åˆ†å…§å®¹ã€Œæµã€å›å‰ç«¯ã€‚é€™ä¸åƒ…èƒ½è®“ä½¿ç”¨è€…æ„Ÿè¦ºç³»çµ±åœ¨å³æ™‚é‹ä½œï¼Œä¹Ÿèƒ½å³æ™‚é¡¯ç¤º Agent çš„æ€è€ƒéç¨‹ï¼Œè®“æ•´é«”äº’å‹•æ›´åŠ é€æ˜ã€æµæš¢ã€‚

äºŒã€ LangChain ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼
LangChain æä¾›äº†ä¸€å€‹éˆæ´»çš„ä¸²æµç³»çµ±ï¼Œä¸»è¦é€é stream æˆ– astream æ–¹æ³•ä¸¦é…åˆ stream_mode åƒæ•¸ä¾†å¯¦ç¾ï¼š

  
      
          æ¨¡å¼ (mode)
          æè¿°
          æ‡‰ç”¨å ´æ™¯
      
  
  
      
          updates
          æ¯å€‹ Agent æ­¥é©ŸçµæŸå¾Œä¸²æµç‹€æ…‹æ›´æ–°ã€‚
          é¡¯ç¤º Agent ç›®å‰è·‘åˆ°äº†å“ªå€‹ç¯€é»ï¼ˆå¦‚ï¼šæ¨¡å‹ã€å·¥å…·ï¼‰ã€‚
      
      
          messages
          ä¸²æµ LLM ç”Ÿæˆçš„æ¯ä¸€å€‹ Token èˆ‡å…¶å…ƒæ•¸æ“šã€‚
          å¯¦ç¾ã€Œæ‰“å­—æ©Ÿã€æ•ˆæœæˆ–ä¸²æµå·¥å…·èª¿ç”¨åƒæ•¸ã€‚
      
      
          custom
          é€é stream_writer å¾ç¯€é»å…§éƒ¨ç™¼é€è‡ªå®šç¾©è¨Šè™Ÿã€‚
          é¡¯ç¤ºã€Œæ­£åœ¨æŸ¥è©¢è³‡æ–™åº« (10/100)&mldr;ã€ç­‰é€²åº¦è¨Šæ¯ã€‚
      
  


ä¸‰ã€ ç›£æ§ä»»å‹™é€²åº¦ï¼šupdates æ¨¡å¼
å¦‚æœä½ æƒ³ç›£æ§ Agent çš„æ•´é«”åŸ·è¡Œæµç¨‹ï¼Œupdates æ˜¯æœ€ç›´è§€çš„æ¨¡å¼ã€‚å®ƒæœƒåœ¨æ¯å€‹ç¯€é»ï¼ˆNodeï¼‰åŸ·è¡Œå®Œç•¢å¾Œï¼Œå™´å‡ºè©²æ­¥é©Ÿç”¢ç”Ÿçš„ç‹€æ…‹è®ŠåŒ–ã€‚"><meta name=author content="Aura"><link rel=canonical href=https://aura.codex.tw/posts/temp1.5/ep4/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://aura.codex.tw/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aura.codex.tw/images/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://aura.codex.tw/images/favicon.ico><link rel=apple-touch-icon href=https://aura.codex.tw/images/favicon.ico><link rel=mask-icon href=https://aura.codex.tw/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://aura.codex.tw/posts/temp1.5/ep4/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://aura.codex.tw/posts/temp1.5/ep4/"><meta property="og:site_name" content="Aura's Space"><meta property="og:title" content="ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ"><meta property="og:description" content=" æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚
é›¶ã€ å‰è¨€ æ¥çºŒä¸Šæ¬¡é—œæ–¼ Tools çš„è¨è«–ï¼Œç•¶æˆ‘å€‘è³¦äºˆäº† Agent é›™æ‰‹å»åŸ·è¡Œä»»å‹™å¾Œï¼Œä¸‹ä¸€å€‹é¢è‡¨çš„å•é¡Œå°±æ˜¯ã€Œç­‰å¾…ã€ã€‚LLM ç”Ÿæˆå›æ‡‰éœ€è¦æ™‚é–“ï¼Œå°¤å…¶æ˜¯ç•¶ä»»å‹™æ¶‰åŠå¤šå€‹å·¥å…·èª¿ç”¨æ™‚ï¼Œæ¼«é•·çš„ç©ºç™½ç­‰å¾…æœƒæ¯€æ‰ä½¿ç”¨è€…é«”é©—ã€‚å› æ­¤ï¼Œæœ¬ç¯‡è¦ä¾†èŠèŠ LangChain çš„ Streaming (ä¸²æµ) ç³»çµ±ï¼Œé€™æ˜¯æå‡æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰é€Ÿåº¦èˆ‡ä½¿ç”¨è€…é«”é©— (UX) çš„æ ¸å¿ƒæŠ€è¡“ã€‚
ä¸€ã€ ç‚ºä»€éº¼éœ€è¦ä¸²æµï¼Ÿ åœ¨ LLM çš„æ‡‰ç”¨ä¸­ï¼Œå»¶é² (Latency) æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸²æµæŠ€è¡“å…è¨±æˆ‘å€‘åœ¨å®Œæ•´å›æ‡‰æº–å‚™å¥½ä¹‹å‰ï¼Œå°±å…ˆå°‡ä¸­é–“éç¨‹èˆ‡éƒ¨åˆ†å…§å®¹ã€Œæµã€å›å‰ç«¯ã€‚é€™ä¸åƒ…èƒ½è®“ä½¿ç”¨è€…æ„Ÿè¦ºç³»çµ±åœ¨å³æ™‚é‹ä½œï¼Œä¹Ÿèƒ½å³æ™‚é¡¯ç¤º Agent çš„æ€è€ƒéç¨‹ï¼Œè®“æ•´é«”äº’å‹•æ›´åŠ é€æ˜ã€æµæš¢ã€‚
äºŒã€ LangChain ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼ LangChain æä¾›äº†ä¸€å€‹éˆæ´»çš„ä¸²æµç³»çµ±ï¼Œä¸»è¦é€é stream æˆ– astream æ–¹æ³•ä¸¦é…åˆ stream_mode åƒæ•¸ä¾†å¯¦ç¾ï¼š
æ¨¡å¼ (mode) æè¿° æ‡‰ç”¨å ´æ™¯ updates æ¯å€‹ Agent æ­¥é©ŸçµæŸå¾Œä¸²æµç‹€æ…‹æ›´æ–°ã€‚ é¡¯ç¤º Agent ç›®å‰è·‘åˆ°äº†å“ªå€‹ç¯€é»ï¼ˆå¦‚ï¼šæ¨¡å‹ã€å·¥å…·ï¼‰ã€‚ messages ä¸²æµ LLM ç”Ÿæˆçš„æ¯ä¸€å€‹ Token èˆ‡å…¶å…ƒæ•¸æ“šã€‚ å¯¦ç¾ã€Œæ‰“å­—æ©Ÿã€æ•ˆæœæˆ–ä¸²æµå·¥å…·èª¿ç”¨åƒæ•¸ã€‚ custom é€é stream_writer å¾ç¯€é»å…§éƒ¨ç™¼é€è‡ªå®šç¾©è¨Šè™Ÿã€‚ é¡¯ç¤ºã€Œæ­£åœ¨æŸ¥è©¢è³‡æ–™åº« (10/100)â€¦ã€ç­‰é€²åº¦è¨Šæ¯ã€‚ ä¸‰ã€ ç›£æ§ä»»å‹™é€²åº¦ï¼šupdates æ¨¡å¼ å¦‚æœä½ æƒ³ç›£æ§ Agent çš„æ•´é«”åŸ·è¡Œæµç¨‹ï¼Œupdates æ˜¯æœ€ç›´è§€çš„æ¨¡å¼ã€‚å®ƒæœƒåœ¨æ¯å€‹ç¯€é»ï¼ˆNodeï¼‰åŸ·è¡Œå®Œç•¢å¾Œï¼Œå™´å‡ºè©²æ­¥é©Ÿç”¢ç”Ÿçš„ç‹€æ…‹è®ŠåŒ–ã€‚"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-17T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-17T00:00:00+00:00"><meta property="article:tag" content="LangChain"><meta property="article:tag" content="Python"><meta name=twitter:card content="summary"><meta name=twitter:title content="ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ"><meta name=twitter:description content="

æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚


é›¶ã€ å‰è¨€
æ¥çºŒä¸Šæ¬¡é—œæ–¼ Tools çš„è¨è«–ï¼Œç•¶æˆ‘å€‘è³¦äºˆäº† Agent é›™æ‰‹å»åŸ·è¡Œä»»å‹™å¾Œï¼Œä¸‹ä¸€å€‹é¢è‡¨çš„å•é¡Œå°±æ˜¯ã€Œç­‰å¾…ã€ã€‚LLM ç”Ÿæˆå›æ‡‰éœ€è¦æ™‚é–“ï¼Œå°¤å…¶æ˜¯ç•¶ä»»å‹™æ¶‰åŠå¤šå€‹å·¥å…·èª¿ç”¨æ™‚ï¼Œæ¼«é•·çš„ç©ºç™½ç­‰å¾…æœƒæ¯€æ‰ä½¿ç”¨è€…é«”é©—ã€‚å› æ­¤ï¼Œæœ¬ç¯‡è¦ä¾†èŠèŠ LangChain çš„ Streaming (ä¸²æµ) ç³»çµ±ï¼Œé€™æ˜¯æå‡æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰é€Ÿåº¦èˆ‡ä½¿ç”¨è€…é«”é©— (UX) çš„æ ¸å¿ƒæŠ€è¡“ã€‚
ä¸€ã€ ç‚ºä»€éº¼éœ€è¦ä¸²æµï¼Ÿ
åœ¨ LLM çš„æ‡‰ç”¨ä¸­ï¼Œå»¶é² (Latency) æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸²æµæŠ€è¡“å…è¨±æˆ‘å€‘åœ¨å®Œæ•´å›æ‡‰æº–å‚™å¥½ä¹‹å‰ï¼Œå°±å…ˆå°‡ä¸­é–“éç¨‹èˆ‡éƒ¨åˆ†å…§å®¹ã€Œæµã€å›å‰ç«¯ã€‚é€™ä¸åƒ…èƒ½è®“ä½¿ç”¨è€…æ„Ÿè¦ºç³»çµ±åœ¨å³æ™‚é‹ä½œï¼Œä¹Ÿèƒ½å³æ™‚é¡¯ç¤º Agent çš„æ€è€ƒéç¨‹ï¼Œè®“æ•´é«”äº’å‹•æ›´åŠ é€æ˜ã€æµæš¢ã€‚

äºŒã€ LangChain ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼
LangChain æä¾›äº†ä¸€å€‹éˆæ´»çš„ä¸²æµç³»çµ±ï¼Œä¸»è¦é€é stream æˆ– astream æ–¹æ³•ä¸¦é…åˆ stream_mode åƒæ•¸ä¾†å¯¦ç¾ï¼š

  
      
          æ¨¡å¼ (mode)
          æè¿°
          æ‡‰ç”¨å ´æ™¯
      
  
  
      
          updates
          æ¯å€‹ Agent æ­¥é©ŸçµæŸå¾Œä¸²æµç‹€æ…‹æ›´æ–°ã€‚
          é¡¯ç¤º Agent ç›®å‰è·‘åˆ°äº†å“ªå€‹ç¯€é»ï¼ˆå¦‚ï¼šæ¨¡å‹ã€å·¥å…·ï¼‰ã€‚
      
      
          messages
          ä¸²æµ LLM ç”Ÿæˆçš„æ¯ä¸€å€‹ Token èˆ‡å…¶å…ƒæ•¸æ“šã€‚
          å¯¦ç¾ã€Œæ‰“å­—æ©Ÿã€æ•ˆæœæˆ–ä¸²æµå·¥å…·èª¿ç”¨åƒæ•¸ã€‚
      
      
          custom
          é€é stream_writer å¾ç¯€é»å…§éƒ¨ç™¼é€è‡ªå®šç¾©è¨Šè™Ÿã€‚
          é¡¯ç¤ºã€Œæ­£åœ¨æŸ¥è©¢è³‡æ–™åº« (10/100)&mldr;ã€ç­‰é€²åº¦è¨Šæ¯ã€‚
      
  


ä¸‰ã€ ç›£æ§ä»»å‹™é€²åº¦ï¼šupdates æ¨¡å¼
å¦‚æœä½ æƒ³ç›£æ§ Agent çš„æ•´é«”åŸ·è¡Œæµç¨‹ï¼Œupdates æ˜¯æœ€ç›´è§€çš„æ¨¡å¼ã€‚å®ƒæœƒåœ¨æ¯å€‹ç¯€é»ï¼ˆNodeï¼‰åŸ·è¡Œå®Œç•¢å¾Œï¼Œå™´å‡ºè©²æ­¥é©Ÿç”¢ç”Ÿçš„ç‹€æ…‹è®ŠåŒ–ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aura.codex.tw/posts/"},{"@type":"ListItem","position":2,"name":"ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ","item":"https://aura.codex.tw/posts/temp1.5/ep4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ","name":"ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ","description":" æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚\né›¶ã€ å‰è¨€ æ¥çºŒä¸Šæ¬¡é—œæ–¼ Tools çš„è¨è«–ï¼Œç•¶æˆ‘å€‘è³¦äºˆäº† Agent é›™æ‰‹å»åŸ·è¡Œä»»å‹™å¾Œï¼Œä¸‹ä¸€å€‹é¢è‡¨çš„å•é¡Œå°±æ˜¯ã€Œç­‰å¾…ã€ã€‚LLM ç”Ÿæˆå›æ‡‰éœ€è¦æ™‚é–“ï¼Œå°¤å…¶æ˜¯ç•¶ä»»å‹™æ¶‰åŠå¤šå€‹å·¥å…·èª¿ç”¨æ™‚ï¼Œæ¼«é•·çš„ç©ºç™½ç­‰å¾…æœƒæ¯€æ‰ä½¿ç”¨è€…é«”é©—ã€‚å› æ­¤ï¼Œæœ¬ç¯‡è¦ä¾†èŠèŠ LangChain çš„ Streaming (ä¸²æµ) ç³»çµ±ï¼Œé€™æ˜¯æå‡æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰é€Ÿåº¦èˆ‡ä½¿ç”¨è€…é«”é©— (UX) çš„æ ¸å¿ƒæŠ€è¡“ã€‚\nä¸€ã€ ç‚ºä»€éº¼éœ€è¦ä¸²æµï¼Ÿ åœ¨ LLM çš„æ‡‰ç”¨ä¸­ï¼Œå»¶é² (Latency) æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸²æµæŠ€è¡“å…è¨±æˆ‘å€‘åœ¨å®Œæ•´å›æ‡‰æº–å‚™å¥½ä¹‹å‰ï¼Œå°±å…ˆå°‡ä¸­é–“éç¨‹èˆ‡éƒ¨åˆ†å…§å®¹ã€Œæµã€å›å‰ç«¯ã€‚é€™ä¸åƒ…èƒ½è®“ä½¿ç”¨è€…æ„Ÿè¦ºç³»çµ±åœ¨å³æ™‚é‹ä½œï¼Œä¹Ÿèƒ½å³æ™‚é¡¯ç¤º Agent çš„æ€è€ƒéç¨‹ï¼Œè®“æ•´é«”äº’å‹•æ›´åŠ é€æ˜ã€æµæš¢ã€‚\näºŒã€ LangChain ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼ LangChain æä¾›äº†ä¸€å€‹éˆæ´»çš„ä¸²æµç³»çµ±ï¼Œä¸»è¦é€é stream æˆ– astream æ–¹æ³•ä¸¦é…åˆ stream_mode åƒæ•¸ä¾†å¯¦ç¾ï¼š\næ¨¡å¼ (mode) æè¿° æ‡‰ç”¨å ´æ™¯ updates æ¯å€‹ Agent æ­¥é©ŸçµæŸå¾Œä¸²æµç‹€æ…‹æ›´æ–°ã€‚ é¡¯ç¤º Agent ç›®å‰è·‘åˆ°äº†å“ªå€‹ç¯€é»ï¼ˆå¦‚ï¼šæ¨¡å‹ã€å·¥å…·ï¼‰ã€‚ messages ä¸²æµ LLM ç”Ÿæˆçš„æ¯ä¸€å€‹ Token èˆ‡å…¶å…ƒæ•¸æ“šã€‚ å¯¦ç¾ã€Œæ‰“å­—æ©Ÿã€æ•ˆæœæˆ–ä¸²æµå·¥å…·èª¿ç”¨åƒæ•¸ã€‚ custom é€é stream_writer å¾ç¯€é»å…§éƒ¨ç™¼é€è‡ªå®šç¾©è¨Šè™Ÿã€‚ é¡¯ç¤ºã€Œæ­£åœ¨æŸ¥è©¢è³‡æ–™åº« (10/100)\u0026hellip;ã€ç­‰é€²åº¦è¨Šæ¯ã€‚ ä¸‰ã€ ç›£æ§ä»»å‹™é€²åº¦ï¼šupdates æ¨¡å¼ å¦‚æœä½ æƒ³ç›£æ§ Agent çš„æ•´é«”åŸ·è¡Œæµç¨‹ï¼Œupdates æ˜¯æœ€ç›´è§€çš„æ¨¡å¼ã€‚å®ƒæœƒåœ¨æ¯å€‹ç¯€é»ï¼ˆNodeï¼‰åŸ·è¡Œå®Œç•¢å¾Œï¼Œå™´å‡ºè©²æ­¥é©Ÿç”¢ç”Ÿçš„ç‹€æ…‹è®ŠåŒ–ã€‚\n","keywords":["LangChain","Python"],"articleBody":" æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚\né›¶ã€ å‰è¨€ æ¥çºŒä¸Šæ¬¡é—œæ–¼ Tools çš„è¨è«–ï¼Œç•¶æˆ‘å€‘è³¦äºˆäº† Agent é›™æ‰‹å»åŸ·è¡Œä»»å‹™å¾Œï¼Œä¸‹ä¸€å€‹é¢è‡¨çš„å•é¡Œå°±æ˜¯ã€Œç­‰å¾…ã€ã€‚LLM ç”Ÿæˆå›æ‡‰éœ€è¦æ™‚é–“ï¼Œå°¤å…¶æ˜¯ç•¶ä»»å‹™æ¶‰åŠå¤šå€‹å·¥å…·èª¿ç”¨æ™‚ï¼Œæ¼«é•·çš„ç©ºç™½ç­‰å¾…æœƒæ¯€æ‰ä½¿ç”¨è€…é«”é©—ã€‚å› æ­¤ï¼Œæœ¬ç¯‡è¦ä¾†èŠèŠ LangChain çš„ Streaming (ä¸²æµ) ç³»çµ±ï¼Œé€™æ˜¯æå‡æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰é€Ÿåº¦èˆ‡ä½¿ç”¨è€…é«”é©— (UX) çš„æ ¸å¿ƒæŠ€è¡“ã€‚\nä¸€ã€ ç‚ºä»€éº¼éœ€è¦ä¸²æµï¼Ÿ åœ¨ LLM çš„æ‡‰ç”¨ä¸­ï¼Œå»¶é² (Latency) æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸²æµæŠ€è¡“å…è¨±æˆ‘å€‘åœ¨å®Œæ•´å›æ‡‰æº–å‚™å¥½ä¹‹å‰ï¼Œå°±å…ˆå°‡ä¸­é–“éç¨‹èˆ‡éƒ¨åˆ†å…§å®¹ã€Œæµã€å›å‰ç«¯ã€‚é€™ä¸åƒ…èƒ½è®“ä½¿ç”¨è€…æ„Ÿè¦ºç³»çµ±åœ¨å³æ™‚é‹ä½œï¼Œä¹Ÿèƒ½å³æ™‚é¡¯ç¤º Agent çš„æ€è€ƒéç¨‹ï¼Œè®“æ•´é«”äº’å‹•æ›´åŠ é€æ˜ã€æµæš¢ã€‚\näºŒã€ LangChain ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼ LangChain æä¾›äº†ä¸€å€‹éˆæ´»çš„ä¸²æµç³»çµ±ï¼Œä¸»è¦é€é stream æˆ– astream æ–¹æ³•ä¸¦é…åˆ stream_mode åƒæ•¸ä¾†å¯¦ç¾ï¼š\næ¨¡å¼ (mode) æè¿° æ‡‰ç”¨å ´æ™¯ updates æ¯å€‹ Agent æ­¥é©ŸçµæŸå¾Œä¸²æµç‹€æ…‹æ›´æ–°ã€‚ é¡¯ç¤º Agent ç›®å‰è·‘åˆ°äº†å“ªå€‹ç¯€é»ï¼ˆå¦‚ï¼šæ¨¡å‹ã€å·¥å…·ï¼‰ã€‚ messages ä¸²æµ LLM ç”Ÿæˆçš„æ¯ä¸€å€‹ Token èˆ‡å…¶å…ƒæ•¸æ“šã€‚ å¯¦ç¾ã€Œæ‰“å­—æ©Ÿã€æ•ˆæœæˆ–ä¸²æµå·¥å…·èª¿ç”¨åƒæ•¸ã€‚ custom é€é stream_writer å¾ç¯€é»å…§éƒ¨ç™¼é€è‡ªå®šç¾©è¨Šè™Ÿã€‚ é¡¯ç¤ºã€Œæ­£åœ¨æŸ¥è©¢è³‡æ–™åº« (10/100)â€¦ã€ç­‰é€²åº¦è¨Šæ¯ã€‚ ä¸‰ã€ ç›£æ§ä»»å‹™é€²åº¦ï¼šupdates æ¨¡å¼ å¦‚æœä½ æƒ³ç›£æ§ Agent çš„æ•´é«”åŸ·è¡Œæµç¨‹ï¼Œupdates æ˜¯æœ€ç›´è§€çš„æ¨¡å¼ã€‚å®ƒæœƒåœ¨æ¯å€‹ç¯€é»ï¼ˆNodeï¼‰åŸ·è¡Œå®Œç•¢å¾Œï¼Œå™´å‡ºè©²æ­¥é©Ÿç”¢ç”Ÿçš„ç‹€æ…‹è®ŠåŒ–ã€‚\nä¸€å€‹å…¸å‹çš„å·¥å…·èª¿ç”¨æµç¨‹åœ¨ updates æ¨¡å¼ä¸‹æœƒé•·é€™æ¨£ï¼š\nModel Node: å™´å‡º AIMessageï¼Œå…§å«å·¥å…·èª¿ç”¨è«‹æ±‚ (Tool Calls)ã€‚ Tool Node: å™´å‡º ToolMessageï¼ŒåŒ…å«å·¥å…·åŸ·è¡Œçµæœã€‚ Model Node: æ ¹æ“šçµæœç”¢ç”Ÿæœ€çµ‚çš„ AI å›æ‡‰ã€‚ 1 2 3 4 5 6 7 8 # ä½¿ç”¨ updates æ¨¡å¼ç›£æ§æ­¥é©Ÿ for chunk in agent.stream( {\"messages\": [{\"role\": \"user\", \"content\": \"å°åŒ—å¤©æ°£å¦‚ä½•ï¼Ÿ\"}]}, stream_mode=\"updates\", ): for step, data in chunk.items(): print(f\"ç›®å‰æ­¥é©Ÿ: {step}\") # data å…§åŒ…å«è©²æ­¥é©Ÿæ›´æ–°çš„è¨Šæ¯ å››ã€ æ¥µè‡´é«”é©—ï¼šmessages æ¨¡å¼èˆ‡ Token ä¸²æµ é€™æ˜¯æˆ‘å€‘æœ€ç†Ÿæ‚‰çš„å ´æ™¯ï¼šAI ä¸€å€‹å­—ä¸€å€‹å­—åå‡ºä¾†ã€‚åœ¨ LangChain ä¸­ï¼Œé€™ä¸åƒ…é™æ–¼æœ€çµ‚æ–‡å­—ï¼Œé€£ å·¥å…·èª¿ç”¨çš„åƒæ•¸ (Arguments) ä¹Ÿå¯ä»¥è¢«ä¸²æµã€‚\nåœ¨ messages æ¨¡å¼ä¸‹ï¼Œä½ æœƒæ”¶åˆ° (token, metadata)ã€‚å¦‚æœæ˜¯å·¥å…·èª¿ç”¨ï¼Œä½ æœƒçœ‹åˆ° tool_call_chunk è£¡é¢é€æ¼¸æ‹¼æ¹Šå‡º JSON æ ¼å¼çš„åƒæ•¸ï¼š\nå„ªé»ï¼šå³ä½¿ AI åœ¨æ€è€ƒè¤‡é›œçš„å·¥å…·åƒæ•¸ï¼Œä½¿ç”¨è€…ä¹Ÿèƒ½å³æ™‚çœ‹åˆ°é€²åº¦ã€‚ æŠ€è¡“ç´°ç¯€ï¼šå¯ä»¥é€é chunk_position == \"last\" ä¾†åˆ¤æ–·è¨Šæ¯æ˜¯å¦ç”Ÿæˆå®Œç•¢ã€‚ 1 2 3 4 5 6 # ä¸²æµ Token èˆ‡å·¥å…·èª¿ç”¨åƒæ•¸ for token, metadata in agent.stream( input_data, stream_mode=\"messages\" ): print(f\"ä¾†è‡ªç¯€é»: {metadata['langgraph_node']}\") print(f\"å…§å®¹ç‰‡æ®µ: {token.content_blocks}\") äº”ã€ è‡ªå®šç¾©ä¸²æµï¼šget_stream_writer æœ‰æ™‚å€™ï¼Œå…§å»ºçš„æ¨¡å¼ä¸å¤ ç”¨ã€‚ä¾‹å¦‚ä½ åœ¨ä¸€å€‹è€—æ™‚çš„å·¥å…·å…§éƒ¨ï¼Œæƒ³è¦æ¯ç§’æ›´æ–°ä¸€æ¬¡é€²åº¦ï¼Œé€™æ™‚å°±å¯ä»¥ç”¨ get_stream_writerï¼š\n1 2 3 4 5 6 7 8 from langgraph.config import get_stream_writer def long_task_tool(param: str): writer = get_stream_writer() writer(\"æ­£åœ¨é€£ç·šåˆ°é ç«¯ä¼ºæœå™¨...\") # ... åŸ·è¡Œä»»å‹™ ... writer(\"é€£ç·šæˆåŠŸï¼Œæ­£åœ¨æŠ“å–æ•¸æ“š...\") return \"ä»»å‹™å®Œæˆ\" æ³¨æ„ï¼šå¦‚æœåœ¨å·¥å…·å…§ä½¿ç”¨äº† get_stream_writerï¼Œè©²å·¥å…·å°±å¿…é ˆåœ¨ LangGraph çš„åŸ·è¡Œç’°å¢ƒä¸‹æ‰èƒ½é‹ä½œã€‚\nå…­ã€ é€²éšæ¨¡å¼ï¼šå¤šæ¨¡å¼ä¸¦è¡Œèˆ‡å¤š Agent å”ä½œ LangChain æ”¯æ´åŒæ™‚å‚³å…¥å¤šå€‹æ¨¡å¼ï¼Œä¾‹å¦‚ stream_mode=[\"updates\", \"custom\"]ã€‚å›å‚³çš„è³‡æ–™æœƒè®Šæˆ (mode, chunk) çš„å…ƒçµ„ï¼Œè®“ä½ æ ¹æ“šä¸åŒçš„æ¨¡å¼é€²è¡Œä¸åŒçš„ UI è™•ç†ã€‚\n1. è™•ç†å­ Agent (Sub-agents) åœ¨å¤š Agent ç³»çµ±ä¸­ï¼Œè¨Šæ¯ä¾†æºæœƒè®Šå¾—å¾ˆæ··äº‚ã€‚ç‚ºäº†åˆ†è¾¨æ˜¯èª°åœ¨èªªè©±ï¼Œæˆ‘å€‘å¯ä»¥ï¼š\nåœ¨åˆå§‹åŒ–æ¨¡å‹æ™‚åŠ å…¥ tags=[\"supervisor\"] æˆ– tags=[\"worker\"]ã€‚ åœ¨ä¸²æµæ™‚è¨­ç½® subgraphs=True ä»¥ç²å–å­åœ–çš„è¼¸å‡ºã€‚ é€é metadata.get(\"tags\") ä¾†éæ¿¾ä¸¦æ¨™ç¤ºç›®å‰æ˜¯å“ªå€‹ Agent æ­£åœ¨ç™¼è¨€ã€‚ 2. äººæ©Ÿäº’å‹• (Human-in-the-loop) ç•¶ä¸²æµéç¨‹ä¸­é‡åˆ°éœ€è¦äººå·¥å¯©æ ¸çš„æ­¥é©Ÿæ™‚ï¼Œä¸²æµæœƒå™´å‡ºä¸€å€‹ __interrupt__ äº‹ä»¶ã€‚é€™æ™‚ç³»çµ±æœƒæš«åœï¼Œç›´åˆ°æ¥æ”¶åˆ° Command(resume=...) æ‰æœƒç¹¼çºŒã€‚\nä¸ƒã€ åœç”¨ä¸²æµçš„æ™‚æ©Ÿ é›–ç„¶ä¸²æµå¾ˆé…·ï¼Œä½†ä¸¦éæ‰€æœ‰æƒ…æ³éƒ½é©åˆã€‚åœ¨ä»¥ä¸‹å ´æ™¯ï¼Œä½ å¯èƒ½éœ€è¦è¨­ç½® streaming=Falseï¼š\nå¤š Agent è·¯ç”±ï¼šæŸäº›è² è²¬æ±ºç­–çš„å…§éƒ¨ Agent ä¸éœ€è¦å°å¤–å±•ç¤ºã€‚ LangSmith ä½ˆç½²ï¼šé˜²æ­¢ç‰¹å®šçš„æ¨¡å‹è¼¸å‡ºè¢«æ´©éœ²åˆ°ç”¨æˆ¶ç«¯ã€‚ æ¨¡å‹é™åˆ¶ï¼šæŸäº›èˆŠå‹è™Ÿæˆ–ç‰¹å®šçš„ Chat Model ä»‹é¢ä¸æ”¯æ´ä¸²æµåƒæ•¸ï¼ˆæ­¤æ™‚éœ€æ”¹ç”¨ disable_streaming=Trueï¼‰ã€‚ å…«ã€ æŠ€è¡“ç¸½çµ ä¸²æµä¸æ˜¯é¸é…ï¼Œè€Œæ˜¯ç¾ä»£ AI æ‡‰ç”¨çš„æ¨™é…ã€‚é€é updates æŒæ¡éª¨å¹¹æµç¨‹ï¼Œé€é messages å‘ˆç¾ç´°ç¯€è³ªæ„Ÿï¼Œå†é…åˆ custom è£œå……æ¥­å‹™é€²åº¦ã€‚\nåœ¨ 1.5 åº¦çš„å´©æ½°è¦–è§’ä¸‹ï¼Œä¸²æµå°±åƒæ˜¯ AI çš„ã€Œç”Ÿå‘½å¾µè±¡åœ–ã€ã€‚æˆ‘å€‘ä¸åƒ…æ˜¯åœ¨çœ‹å®ƒçµ¦å‡ºçš„ç­”æ¡ˆï¼Œæ›´æ˜¯åœ¨çœ‹å®ƒå¦‚ä½•æ€è€ƒã€å¦‚ä½•æ™æ‰ã€å¦‚ä½•å‘¼å«å·¥å…·ï¼Œæœ€å¾Œæ‰æŠŠçµæœå‘ˆç¾çµ¦æˆ‘å€‘ã€‚æŒæ¡äº†é€™å¥—ç³»çµ±ï¼Œä½ çš„ Agent æ‰ç®—çœŸæ­£åœ°æ´»åœ¨å³æ™‚çš„ä¸–ç•Œè£¡ã€‚\nä¹ã€ çµèª ã€Œå›æ‡‰çš„å¿«æ…¢æ˜¯æ•ˆèƒ½å•é¡Œï¼Œä½†å›æ‡‰çš„å³æ™‚æ„Ÿæ˜¯è¨­è¨ˆå•é¡Œã€‚ã€\nä¸²æµä¸åªæ˜¯æŠ€è¡“ä¸Šçš„å¯¦ç¾ï¼Œæ›´æ˜¯ä¸€ç¨® UX å“²å­¸ã€‚åœ¨ AI å›æ‡‰ç·©æ…¢çš„ç¾å¯¦ä¸‹ï¼Œé€éé€å­—é¡¯ç¤ºï¼Œæˆ‘å€‘çµ¦äºˆäº†ä½¿ç”¨è€…ä¸€ç¨®ã€ŒAI æ­£åœ¨åŠªåŠ›æ€è€ƒä¸¦èˆ‡ä½ å°è©±ã€çš„è‡¨å ´æ„Ÿã€‚\nä¸‹æ¬¡ç•¶ä½ çœ‹åˆ° AI åœåœ¨é‚£é‚Šæ€è€ƒå¤ªä¹…æ™‚ï¼Œåˆ¥å¿˜äº†æŠŠä¸²æµé–‹èµ·ä¾†ï¼Œçµ¦ä½¿ç”¨è€…ä¸€é»ã€Œå®ƒé‚„æ´»è‘—ã€çš„è­‰æ“šå§ï¼\n","wordCount":"293","inLanguage":"en","datePublished":"2025-10-17T00:00:00Z","dateModified":"2025-10-17T00:00:00Z","author":{"@type":"Person","name":"Aura"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://aura.codex.tw/posts/temp1.5/ep4/"},"publisher":{"@type":"Organization","name":"Aura's Space","logo":{"@type":"ImageObject","url":"https://aura.codex.tw/images/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://aura.codex.tw/ accesskey=h title="Aura's Space (Alt + H)"><img src=https://aura.codex.tw/images/favicon.ico alt aria-label=logo height=35>Aura's Space</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://aura.codex.tw/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://aura.codex.tw/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://aura.codex.tw/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://aura.codex.tw/about/ title=About><span>About</span></a></li><li><a href=https://aura.codex.tw/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://aura.codex.tw/>Home</a>&nbsp;Â»&nbsp;<a href=https://aura.codex.tw/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">ã€Temperature 1.5 çš„æ—¥å¸¸ã€‘EP4: LangChain - Streaming, æ‰“ç ´æ²ˆé»˜çš„å‘¼å¸æ„Ÿ</h1><div class=post-meta><span title='2025-10-17 00:00:00 +0000 UTC'>October 17, 2025</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>Aura</span></div></header><ul class=post-tags><li><a href=https://aura.codex.tw/tags/langchain/>LangChain</a></li><li><a href=https://aura.codex.tw/tags/python/>Python</a></li></ul><div class=post-content><hr><blockquote><p>æœ¬æ–‡ç‚ºå€‹äººå­¸ç¿’ç­†è¨˜ï¼Œè¨˜éŒ„äº†å­¸ç¿’éç¨‹ä¸­çš„ä¸€äº›çŸ¥è­˜ï¼Œå¯åƒè€ƒï¼Œä½†ä¸å¯èªçœŸï¼Œå­¸ç¿’çš„éç¨‹å¯èƒ½æœ‰ç†è§£éŒ¯èª¤ï¼Œè³‡è¨Šä¸ä¸€å®šæ­£ç¢ºï¼Œç•¢ç«Ÿ Temperature éƒ½ 1.5 äº†ã€‚</p></blockquote><hr><h3 id=é›¶-å‰è¨€>é›¶ã€ å‰è¨€<a hidden class=anchor aria-hidden=true href=#é›¶-å‰è¨€>#</a></h3><p>æ¥çºŒä¸Šæ¬¡é—œæ–¼ <strong>Tools</strong> çš„è¨è«–ï¼Œç•¶æˆ‘å€‘è³¦äºˆäº† Agent é›™æ‰‹å»åŸ·è¡Œä»»å‹™å¾Œï¼Œä¸‹ä¸€å€‹é¢è‡¨çš„å•é¡Œå°±æ˜¯ã€Œç­‰å¾…ã€ã€‚LLM ç”Ÿæˆå›æ‡‰éœ€è¦æ™‚é–“ï¼Œå°¤å…¶æ˜¯ç•¶ä»»å‹™æ¶‰åŠå¤šå€‹å·¥å…·èª¿ç”¨æ™‚ï¼Œæ¼«é•·çš„ç©ºç™½ç­‰å¾…æœƒæ¯€æ‰ä½¿ç”¨è€…é«”é©—ã€‚å› æ­¤ï¼Œæœ¬ç¯‡è¦ä¾†èŠèŠ LangChain çš„ <strong>Streaming (ä¸²æµ)</strong> ç³»çµ±ï¼Œé€™æ˜¯æå‡æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰é€Ÿåº¦èˆ‡ä½¿ç”¨è€…é«”é©— (UX) çš„æ ¸å¿ƒæŠ€è¡“ã€‚</p><h3 id=ä¸€-ç‚ºä»€éº¼éœ€è¦ä¸²æµ>ä¸€ã€ ç‚ºä»€éº¼éœ€è¦ä¸²æµï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä¸€-ç‚ºä»€éº¼éœ€è¦ä¸²æµ>#</a></h3><p>åœ¨ LLM çš„æ‡‰ç”¨ä¸­ï¼Œå»¶é² (Latency) æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸²æµæŠ€è¡“å…è¨±æˆ‘å€‘åœ¨å®Œæ•´å›æ‡‰æº–å‚™å¥½ä¹‹å‰ï¼Œå°±å…ˆå°‡ä¸­é–“éç¨‹èˆ‡éƒ¨åˆ†å…§å®¹ã€Œæµã€å›å‰ç«¯ã€‚é€™ä¸åƒ…èƒ½è®“ä½¿ç”¨è€…æ„Ÿè¦ºç³»çµ±åœ¨å³æ™‚é‹ä½œï¼Œä¹Ÿèƒ½å³æ™‚é¡¯ç¤º Agent çš„æ€è€ƒéç¨‹ï¼Œè®“æ•´é«”äº’å‹•æ›´åŠ é€æ˜ã€æµæš¢ã€‚</p><hr><h3 id=äºŒ-langchain-ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼>äºŒã€ LangChain ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼<a hidden class=anchor aria-hidden=true href=#äºŒ-langchain-ä¸²æµçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å¼>#</a></h3><p>LangChain æä¾›äº†ä¸€å€‹éˆæ´»çš„ä¸²æµç³»çµ±ï¼Œä¸»è¦é€é <code>stream</code> æˆ– <code>astream</code> æ–¹æ³•ä¸¦é…åˆ <code>stream_mode</code> åƒæ•¸ä¾†å¯¦ç¾ï¼š</p><table><thead><tr><th>æ¨¡å¼ (<code>mode</code>)</th><th>æè¿°</th><th>æ‡‰ç”¨å ´æ™¯</th></tr></thead><tbody><tr><td><strong><code>updates</code></strong></td><td>æ¯å€‹ Agent æ­¥é©ŸçµæŸå¾Œä¸²æµç‹€æ…‹æ›´æ–°ã€‚</td><td>é¡¯ç¤º Agent ç›®å‰è·‘åˆ°äº†å“ªå€‹ç¯€é»ï¼ˆå¦‚ï¼šæ¨¡å‹ã€å·¥å…·ï¼‰ã€‚</td></tr><tr><td><strong><code>messages</code></strong></td><td>ä¸²æµ LLM ç”Ÿæˆçš„æ¯ä¸€å€‹ Token èˆ‡å…¶å…ƒæ•¸æ“šã€‚</td><td>å¯¦ç¾ã€Œæ‰“å­—æ©Ÿã€æ•ˆæœæˆ–ä¸²æµå·¥å…·èª¿ç”¨åƒæ•¸ã€‚</td></tr><tr><td><strong><code>custom</code></strong></td><td>é€é <code>stream_writer</code> å¾ç¯€é»å…§éƒ¨ç™¼é€è‡ªå®šç¾©è¨Šè™Ÿã€‚</td><td>é¡¯ç¤ºã€Œæ­£åœ¨æŸ¥è©¢è³‡æ–™åº« (10/100)&mldr;ã€ç­‰é€²åº¦è¨Šæ¯ã€‚</td></tr></tbody></table><hr><h3 id=ä¸‰-ç›£æ§ä»»å‹™é€²åº¦updates-æ¨¡å¼>ä¸‰ã€ ç›£æ§ä»»å‹™é€²åº¦ï¼š<code>updates</code> æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#ä¸‰-ç›£æ§ä»»å‹™é€²åº¦updates-æ¨¡å¼>#</a></h3><p>å¦‚æœä½ æƒ³ç›£æ§ Agent çš„æ•´é«”åŸ·è¡Œæµç¨‹ï¼Œ<code>updates</code> æ˜¯æœ€ç›´è§€çš„æ¨¡å¼ã€‚å®ƒæœƒåœ¨æ¯å€‹ç¯€é»ï¼ˆNodeï¼‰åŸ·è¡Œå®Œç•¢å¾Œï¼Œå™´å‡ºè©²æ­¥é©Ÿç”¢ç”Ÿçš„ç‹€æ…‹è®ŠåŒ–ã€‚</p><p>ä¸€å€‹å…¸å‹çš„å·¥å…·èª¿ç”¨æµç¨‹åœ¨ <code>updates</code> æ¨¡å¼ä¸‹æœƒé•·é€™æ¨£ï¼š</p><ol><li><strong>Model Node</strong>: å™´å‡º <code>AIMessage</code>ï¼Œå…§å«å·¥å…·èª¿ç”¨è«‹æ±‚ (Tool Calls)ã€‚</li><li><strong>Tool Node</strong>: å™´å‡º <code>ToolMessage</code>ï¼ŒåŒ…å«å·¥å…·åŸ·è¡Œçµæœã€‚</li><li><strong>Model Node</strong>: æ ¹æ“šçµæœç”¢ç”Ÿæœ€çµ‚çš„ AI å›æ‡‰ã€‚</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ä½¿ç”¨ updates æ¨¡å¼ç›£æ§æ­¥é©Ÿ</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=n>agent</span><span class=o>.</span><span class=n>stream</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=s2>&#34;messages&#34;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;content&#34;</span><span class=p>:</span> <span class=s2>&#34;å°åŒ—å¤©æ°£å¦‚ä½•ï¼Ÿ&#34;</span><span class=p>}]},</span>
</span></span><span class=line><span class=cl>    <span class=n>stream_mode</span><span class=o>=</span><span class=s2>&#34;updates&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>step</span><span class=p>,</span> <span class=n>data</span> <span class=ow>in</span> <span class=n>chunk</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ç›®å‰æ­¥é©Ÿ: </span><span class=si>{</span><span class=n>step</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># data å…§åŒ…å«è©²æ­¥é©Ÿæ›´æ–°çš„è¨Šæ¯</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=å››-æ¥µè‡´é«”é©—messages-æ¨¡å¼èˆ‡-token-ä¸²æµ>å››ã€ æ¥µè‡´é«”é©—ï¼š<code>messages</code> æ¨¡å¼èˆ‡ Token ä¸²æµ<a hidden class=anchor aria-hidden=true href=#å››-æ¥µè‡´é«”é©—messages-æ¨¡å¼èˆ‡-token-ä¸²æµ>#</a></h3><p>é€™æ˜¯æˆ‘å€‘æœ€ç†Ÿæ‚‰çš„å ´æ™¯ï¼šAI ä¸€å€‹å­—ä¸€å€‹å­—åå‡ºä¾†ã€‚åœ¨ LangChain ä¸­ï¼Œé€™ä¸åƒ…é™æ–¼æœ€çµ‚æ–‡å­—ï¼Œé€£ <strong>å·¥å…·èª¿ç”¨çš„åƒæ•¸ (Arguments)</strong> ä¹Ÿå¯ä»¥è¢«ä¸²æµã€‚</p><p>åœ¨ <code>messages</code> æ¨¡å¼ä¸‹ï¼Œä½ æœƒæ”¶åˆ° <code>(token, metadata)</code>ã€‚å¦‚æœæ˜¯å·¥å…·èª¿ç”¨ï¼Œä½ æœƒçœ‹åˆ° <code>tool_call_chunk</code> è£¡é¢é€æ¼¸æ‹¼æ¹Šå‡º JSON æ ¼å¼çš„åƒæ•¸ï¼š</p><ul><li><strong>å„ªé»</strong>ï¼šå³ä½¿ AI åœ¨æ€è€ƒè¤‡é›œçš„å·¥å…·åƒæ•¸ï¼Œä½¿ç”¨è€…ä¹Ÿèƒ½å³æ™‚çœ‹åˆ°é€²åº¦ã€‚</li><li><strong>æŠ€è¡“ç´°ç¯€</strong>ï¼šå¯ä»¥é€é <code>chunk_position == "last"</code> ä¾†åˆ¤æ–·è¨Šæ¯æ˜¯å¦ç”Ÿæˆå®Œç•¢ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ä¸²æµ Token èˆ‡å·¥å…·èª¿ç”¨åƒæ•¸</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>token</span><span class=p>,</span> <span class=n>metadata</span> <span class=ow>in</span> <span class=n>agent</span><span class=o>.</span><span class=n>stream</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>input_data</span><span class=p>,</span> <span class=n>stream_mode</span><span class=o>=</span><span class=s2>&#34;messages&#34;</span>
</span></span><span class=line><span class=cl><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ä¾†è‡ªç¯€é»: </span><span class=si>{</span><span class=n>metadata</span><span class=p>[</span><span class=s1>&#39;langgraph_node&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;å…§å®¹ç‰‡æ®µ: </span><span class=si>{</span><span class=n>token</span><span class=o>.</span><span class=n>content_blocks</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=äº”-è‡ªå®šç¾©ä¸²æµget_stream_writer>äº”ã€ è‡ªå®šç¾©ä¸²æµï¼š<code>get_stream_writer</code><a hidden class=anchor aria-hidden=true href=#äº”-è‡ªå®šç¾©ä¸²æµget_stream_writer>#</a></h3><p>æœ‰æ™‚å€™ï¼Œå…§å»ºçš„æ¨¡å¼ä¸å¤ ç”¨ã€‚ä¾‹å¦‚ä½ åœ¨ä¸€å€‹è€—æ™‚çš„å·¥å…·å…§éƒ¨ï¼Œæƒ³è¦æ¯ç§’æ›´æ–°ä¸€æ¬¡é€²åº¦ï¼Œé€™æ™‚å°±å¯ä»¥ç”¨ <code>get_stream_writer</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langgraph.config</span> <span class=kn>import</span> <span class=n>get_stream_writer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>long_task_tool</span><span class=p>(</span><span class=n>param</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span> <span class=o>=</span> <span class=n>get_stream_writer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=p>(</span><span class=s2>&#34;æ­£åœ¨é€£ç·šåˆ°é ç«¯ä¼ºæœå™¨...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># ... åŸ·è¡Œä»»å‹™ ...</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=p>(</span><span class=s2>&#34;é€£ç·šæˆåŠŸï¼Œæ­£åœ¨æŠ“å–æ•¸æ“š...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;ä»»å‹™å®Œæˆ&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><em>æ³¨æ„ï¼šå¦‚æœåœ¨å·¥å…·å…§ä½¿ç”¨äº† <code>get_stream_writer</code>ï¼Œè©²å·¥å…·å°±å¿…é ˆåœ¨ LangGraph çš„åŸ·è¡Œç’°å¢ƒä¸‹æ‰èƒ½é‹ä½œã€‚</em></p><hr><h3 id=å…­-é€²éšæ¨¡å¼å¤šæ¨¡å¼ä¸¦è¡Œèˆ‡å¤š-agent-å”ä½œ>å…­ã€ é€²éšæ¨¡å¼ï¼šå¤šæ¨¡å¼ä¸¦è¡Œèˆ‡å¤š Agent å”ä½œ<a hidden class=anchor aria-hidden=true href=#å…­-é€²éšæ¨¡å¼å¤šæ¨¡å¼ä¸¦è¡Œèˆ‡å¤š-agent-å”ä½œ>#</a></h3><p>LangChain æ”¯æ´åŒæ™‚å‚³å…¥å¤šå€‹æ¨¡å¼ï¼Œä¾‹å¦‚ <code>stream_mode=["updates", "custom"]</code>ã€‚å›å‚³çš„è³‡æ–™æœƒè®Šæˆ <code>(mode, chunk)</code> çš„å…ƒçµ„ï¼Œè®“ä½ æ ¹æ“šä¸åŒçš„æ¨¡å¼é€²è¡Œä¸åŒçš„ UI è™•ç†ã€‚</p><h4 id=1-è™•ç†å­-agent-sub-agents>1. è™•ç†å­ Agent (Sub-agents)<a hidden class=anchor aria-hidden=true href=#1-è™•ç†å­-agent-sub-agents>#</a></h4><p>åœ¨å¤š Agent ç³»çµ±ä¸­ï¼Œè¨Šæ¯ä¾†æºæœƒè®Šå¾—å¾ˆæ··äº‚ã€‚ç‚ºäº†åˆ†è¾¨æ˜¯èª°åœ¨èªªè©±ï¼Œæˆ‘å€‘å¯ä»¥ï¼š</p><ul><li>åœ¨åˆå§‹åŒ–æ¨¡å‹æ™‚åŠ å…¥ <code>tags=["supervisor"]</code> æˆ– <code>tags=["worker"]</code>ã€‚</li><li>åœ¨ä¸²æµæ™‚è¨­ç½® <code>subgraphs=True</code> ä»¥ç²å–å­åœ–çš„è¼¸å‡ºã€‚</li><li>é€é <code>metadata.get("tags")</code> ä¾†éæ¿¾ä¸¦æ¨™ç¤ºç›®å‰æ˜¯å“ªå€‹ Agent æ­£åœ¨ç™¼è¨€ã€‚</li></ul><h4 id=2-äººæ©Ÿäº’å‹•-human-in-the-loop>2. äººæ©Ÿäº’å‹• (Human-in-the-loop)<a hidden class=anchor aria-hidden=true href=#2-äººæ©Ÿäº’å‹•-human-in-the-loop>#</a></h4><p>ç•¶ä¸²æµéç¨‹ä¸­é‡åˆ°éœ€è¦äººå·¥å¯©æ ¸çš„æ­¥é©Ÿæ™‚ï¼Œä¸²æµæœƒå™´å‡ºä¸€å€‹ <code>__interrupt__</code> äº‹ä»¶ã€‚é€™æ™‚ç³»çµ±æœƒæš«åœï¼Œç›´åˆ°æ¥æ”¶åˆ° <code>Command(resume=...)</code> æ‰æœƒç¹¼çºŒã€‚</p><hr><h3 id=ä¸ƒ-åœç”¨ä¸²æµçš„æ™‚æ©Ÿ>ä¸ƒã€ åœç”¨ä¸²æµçš„æ™‚æ©Ÿ<a hidden class=anchor aria-hidden=true href=#ä¸ƒ-åœç”¨ä¸²æµçš„æ™‚æ©Ÿ>#</a></h3><p>é›–ç„¶ä¸²æµå¾ˆé…·ï¼Œä½†ä¸¦éæ‰€æœ‰æƒ…æ³éƒ½é©åˆã€‚åœ¨ä»¥ä¸‹å ´æ™¯ï¼Œä½ å¯èƒ½éœ€è¦è¨­ç½® <code>streaming=False</code>ï¼š</p><ul><li><strong>å¤š Agent è·¯ç”±</strong>ï¼šæŸäº›è² è²¬æ±ºç­–çš„å…§éƒ¨ Agent ä¸éœ€è¦å°å¤–å±•ç¤ºã€‚</li><li><strong>LangSmith ä½ˆç½²</strong>ï¼šé˜²æ­¢ç‰¹å®šçš„æ¨¡å‹è¼¸å‡ºè¢«æ´©éœ²åˆ°ç”¨æˆ¶ç«¯ã€‚</li><li><strong>æ¨¡å‹é™åˆ¶</strong>ï¼šæŸäº›èˆŠå‹è™Ÿæˆ–ç‰¹å®šçš„ Chat Model ä»‹é¢ä¸æ”¯æ´ä¸²æµåƒæ•¸ï¼ˆæ­¤æ™‚éœ€æ”¹ç”¨ <code>disable_streaming=True</code>ï¼‰ã€‚</li></ul><hr><h3 id=å…«-æŠ€è¡“ç¸½çµ>å…«ã€ æŠ€è¡“ç¸½çµ<a hidden class=anchor aria-hidden=true href=#å…«-æŠ€è¡“ç¸½çµ>#</a></h3><p>ä¸²æµä¸æ˜¯é¸é…ï¼Œè€Œæ˜¯ç¾ä»£ AI æ‡‰ç”¨çš„æ¨™é…ã€‚é€é <code>updates</code> æŒæ¡éª¨å¹¹æµç¨‹ï¼Œé€é <code>messages</code> å‘ˆç¾ç´°ç¯€è³ªæ„Ÿï¼Œå†é…åˆ <code>custom</code> è£œå……æ¥­å‹™é€²åº¦ã€‚</p><p>åœ¨ 1.5 åº¦çš„å´©æ½°è¦–è§’ä¸‹ï¼Œä¸²æµå°±åƒæ˜¯ AI çš„ã€Œç”Ÿå‘½å¾µè±¡åœ–ã€ã€‚æˆ‘å€‘ä¸åƒ…æ˜¯åœ¨çœ‹å®ƒçµ¦å‡ºçš„ç­”æ¡ˆï¼Œæ›´æ˜¯åœ¨çœ‹å®ƒå¦‚ä½•æ€è€ƒã€å¦‚ä½•æ™æ‰ã€å¦‚ä½•å‘¼å«å·¥å…·ï¼Œæœ€å¾Œæ‰æŠŠçµæœå‘ˆç¾çµ¦æˆ‘å€‘ã€‚æŒæ¡äº†é€™å¥—ç³»çµ±ï¼Œä½ çš„ Agent æ‰ç®—çœŸæ­£åœ°æ´»åœ¨å³æ™‚çš„ä¸–ç•Œè£¡ã€‚</p><hr><h3 id=ä¹-çµèª>ä¹ã€ çµèª<a hidden class=anchor aria-hidden=true href=#ä¹-çµèª>#</a></h3><p><strong>ã€Œå›æ‡‰çš„å¿«æ…¢æ˜¯æ•ˆèƒ½å•é¡Œï¼Œä½†å›æ‡‰çš„å³æ™‚æ„Ÿæ˜¯è¨­è¨ˆå•é¡Œã€‚ã€</strong></p><p>ä¸²æµä¸åªæ˜¯æŠ€è¡“ä¸Šçš„å¯¦ç¾ï¼Œæ›´æ˜¯ä¸€ç¨® <strong>UX å“²å­¸</strong>ã€‚åœ¨ AI å›æ‡‰ç·©æ…¢çš„ç¾å¯¦ä¸‹ï¼Œé€éé€å­—é¡¯ç¤ºï¼Œæˆ‘å€‘çµ¦äºˆäº†ä½¿ç”¨è€…ä¸€ç¨®ã€ŒAI æ­£åœ¨åŠªåŠ›æ€è€ƒä¸¦èˆ‡ä½ å°è©±ã€çš„è‡¨å ´æ„Ÿã€‚</p><p>ä¸‹æ¬¡ç•¶ä½ çœ‹åˆ° AI åœåœ¨é‚£é‚Šæ€è€ƒå¤ªä¹…æ™‚ï¼Œåˆ¥å¿˜äº†æŠŠä¸²æµé–‹èµ·ä¾†ï¼Œçµ¦ä½¿ç”¨è€…ä¸€é»ã€Œå®ƒé‚„æ´»è‘—ã€çš„è­‰æ“šå§ï¼</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022~2025 <a href=https://aura.codex.tw/>Aura's Space</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>