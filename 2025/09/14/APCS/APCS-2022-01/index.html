<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Aura&#39;s Space">
    <meta name="description" content="A place to learn">
    <meta name="author" content="Aura">
    <style>
        body{
            -ms-overflow-style: none;  /* Internet Explorer 10+ */
            scrollbar-width: none;  /* Firefox */
        }
        body::-webkit-scrollbar { 
            display: none;  /* Safari and Chrome */
        }
    </style>
    
    <title>
        
            APCS-2022-01 |
        
        Aura Space
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/fontawesome.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/regular.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/solid.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/brands.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"}
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":false,"init_open":true},"style":{"primary_color":"#f39c12","logo":"/images/logo.svg","favicon":"/images/logo.svg","avatar":"/images/avatar.svg","font_size":null,"font_family":"Roboto","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"header_transparent":true,"background_img":"/images/bg.svg","description":"Keep learning,|| Keep Coding.","font_color":null,"hitokoto":false},"scroll":{"progress_bar":false,"percent":false}},"local_search":{"enable":true,"preload":true},"code_copy":{},"code_block":{"tools":{"enable":true,"style":"mac"},"highlight_theme":"default"},"side_tools":{},"pjax":{"enable":false},"lazyload":{"enable":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.8"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":false,"auto":true,"custom_label_list":["Trainee","Engineer","Architect"]},"word_count":{"enable":false,"wordcount":false,"min2read":false},"img_align":"center","copyright_info":false},"version":"3.6.1"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original article title","author":"Original article author","link":"Original article link"}
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


    <main class="page-container">

        

                    <div class="page-main-content">

                        <div class="page-main-content-top">
                            
<header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/images/logo.svg">
                </a>
            
            <a class="logo-title" href="/">
               Aura Space
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


                        </div>

                        <div class="page-main-content-middle">

                            <div class="main-content">

                                
                                                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            <div class="article-title">
                <span class="title-hover-animation">APCS-2022-01</span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/avatar.svg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Aura</span>
                            
                        </div>
                        <div class="meta-info">
                            
<div class="article-meta-info">
    <span class="article-date article-meta-item">
        
            <i class="fa-regular fa-calendar-plus"></i>&nbsp;
        
        <span class="pc">2025-09-14 14:03:14</span>
        <span class="mobile">2025-09-14 14:03</span>
    </span>
    
        <span class="article-update-date article-meta-item">
        <i class="fas fa-file-pen"></i>&nbsp;
        <span class="pc">2025-11-09 22:15:19</span>
    </span>
    
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/APCS/">APCS</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    

    
    
    
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content keep-markdown-body">
                

                <h1 id="1-程式交易"><a href="#1-程式交易" class="headerlink" title="1. 程式交易"></a>1. 程式交易</h1><h2 id="解題步驟"><a href="#解題步驟" class="headerlink" title="解題步驟"></a>解題步驟</h2><ol>
<li><strong>讀取輸入資料</strong>: 讀取股票天數 <code>n</code>、價差 <code>D</code>，以及 <code>n</code> 天的每日價格。</li>
<li><strong>初始化交易狀態</strong>:<ul>
<li>設定總利潤 <code>ans</code> 為 0。</li>
<li>根據規則 1，在時間點 1 (索引 0) 買進，設定目前持有股票的成本 <code>x</code> 為 <code>a[0]</code>。</li>
<li>設定一個變數 <code>y</code> 來記錄上一次的賣出價格。</li>
<li>我們將使用一個特殊值（例如 <code>-1</code>）來表示 <code>x</code>，代表當下未持有股票。</li>
</ul>
</li>
<li><strong>模擬交易過程</strong>: 使用 for 迴圈從第二天 (索引 1) 開始遍歷到第 <code>n</code> 天。</li>
<li><strong>判斷當前狀態 (持有&#x2F;未持有)</strong>: 在迴圈中，檢查 <code>x</code> 是否為 <code>-1</code>。<ul>
<li><strong>若持有股票 (<code>x != -1</code>)</strong>: 檢查是否滿足<strong>賣出條件</strong> (規則 2)。如果 <code>a[i] &gt;= x + D</code>，則賣出：<ul>
<li>將利潤 <code>a[i] - x</code> 加入 <code>ans</code>。</li>
<li>更新狀態為未持有 (設定 <code>x = -1</code>)。</li>
<li>記錄本次賣出價格 <code>y = a[i]</code>。</li>
</ul>
</li>
<li><strong>若未持有股票 (<code>x == -1</code>)</strong>: 檢查是否滿足<strong>買進條件</strong> (規則 3)。如果 <code>a[i] &lt;= y - D</code>，則買進：<ul>
<li>更新狀態為持有，並記錄買進成本 <code>x = a[i]</code>。</li>
</ul>
</li>
</ul>
</li>
<li><strong>輸出總利潤</strong>: 迴圈結束後，<code>ans</code> 即為總利潤，將其輸出。</li>
</ol>
<h2 id="分段步驟程式碼"><a href="#分段步驟程式碼" class="headerlink" title="分段步驟程式碼"></a>分段步驟程式碼</h2><h3 id="讀取輸入資料"><a href="#讀取輸入資料" class="headerlink" title="讀取輸入資料"></a>讀取輸入資料</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n, D;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;D;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n,<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    cin&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這段程式碼讀取 <code>n</code> 和 <code>D</code>，並使用一個 <code>vector</code> 容器 <code>a</code> 來儲存 <code>n</code> 天的股票價格。</p>
<h3 id="初始化交易狀態"><a href="#初始化交易狀態" class="headerlink" title="初始化交易狀態"></a>初始化交易狀態</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> ans=<span class="number">0</span>,x=a[<span class="number">0</span>],y=<span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>ans</code>：初始化總利潤為 0。</li>
<li><code>x</code>：代表目前持有股票的<strong>買進價格</strong>。根據規則 1，我們在第一天就買進，所以 <code>x</code> 初始為 <code>a[0]</code>。在後續邏輯中，<code>x</code> 若被設為 <code>-1</code> 則代表「未持有」股票。</li>
<li><code>y</code>：代表<strong>上一次的賣出價格</strong>，用於判斷下一次的買進時機。</li>
</ul>
<h3 id="模擬交易過程"><a href="#模擬交易過程" class="headerlink" title="模擬交易過程"></a>模擬交易過程</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(x!=<span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;=x+D)&#123;</span><br><span class="line">            ans += a[i] - x;</span><br><span class="line">            x = <span class="number">-1</span>;</span><br><span class="line">            y = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&lt;=y-D)&#123;</span><br><span class="line">            x = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這段程式碼是核心的模擬邏輯，從第二天 (索引 <code>i=1</code>) 開始：</p>
<ul>
<li><code>if(x != -1)</code>：檢查是否<strong>持有</strong>股票。<ul>
<li><code>if(a[i] &gt;= x + D)</code>：(規則 2) 檢查當前價格是否達到賣出門檻。若是，則計算利潤、將狀態改為未持有 (<code>x = -1</code>)、並記錄賣出價格 <code>y</code>。</li>
</ul>
</li>
<li><code>else</code>：若<strong>未持有</strong>股票 (<code>x == -1</code>)。<ul>
<li><code>if(a[i] &lt;= y - D)</code>：(規則 3) 檢查當前價格是否達到買進門檻。若是，則買進股票，將 <code>x</code> 設為當前的買進價格 <code>a[i]</code>。</li>
</ul>
</li>
</ul>
<h3 id="輸出總利潤"><a href="#輸出總利潤" class="headerlink" title="輸出總利潤"></a>輸出總利潤</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout&lt;&lt;ans&lt;&lt;endl;</span><br></pre></td></tr></table></figure>

<p>這段程式碼輸出在整個過程中累計的總利潤 <code>ans</code>。</p>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, D;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;D;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin&gt;&gt;a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>,x=a[<span class="number">0</span>],y=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(x!=<span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;=x+D)&#123;</span><br><span class="line">                ans += a[i] - x;</span><br><span class="line">                x = <span class="number">-1</span>;</span><br><span class="line">                y = a[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&lt;=y-D)&#123;</span><br><span class="line">                x = a[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-贏家預測"><a href="#2-贏家預測" class="headerlink" title="2. 贏家預測"></a>2. 贏家預測</h1><h2 id="解題步驟-1"><a href="#解題步驟-1" class="headerlink" title="解題步驟"></a>解題步驟</h2><ol>
<li><strong>讀取輸入</strong>: 讀取人數 <code>n</code> 和淘汰敗場數 <code>m</code>。</li>
<li><strong>儲存初始能力</strong>: 分別讀取 <code>n</code> 個人的戰力 $S$ 和應變力 $T$，存入兩個 <code>vector&lt;int&gt; S</code> 和 <code>T</code>。</li>
<li><strong>初始化比賽序列</strong>:<ul>
<li>建立一個 <code>vector&lt;vector&lt;int&gt;&gt; info</code> 來儲存<strong>當前所有參賽者</strong>的資訊。</li>
<li><code>info</code> 中的每個元素 <code>info[i]</code> 都是一個 <code>vector&lt;int&gt;</code>，包含 4 個值：<code>[戰力, 應變力, 編號, 目前敗場數]</code>。</li>
<li>依照輸入的「初始排列順序」，讀取每個編號 <code>idx</code>，然後從 <code>S</code> 和 <code>T</code> 陣列中 (使用 <code>idx-1</code> 索引) 查找對應的戰力和應變力，連同編號 <code>idx</code> 和初始敗場 <code>0</code>，一起存入 <code>info</code> 向量。</li>
</ul>
</li>
<li><strong>模擬比賽 (主迴圈)</strong>:<ul>
<li>使用一個 <code>while(info.size() != 1)</code> 迴圈，表示只要參賽人數大於 1，比賽就繼續進行。</li>
</ul>
</li>
<li><strong>執行一輪比賽 (Round)</strong>:<ul>
<li>在 <code>while</code> 迴圈內部，建立兩個新的暫存 <code>vector</code>：<code>win</code> (勝利組) 和 <code>lose</code> (失敗組)。</li>
<li>使用 <code>for</code> 迴圈遍歷 <code>info</code> 向量，<strong>兩兩一組</strong> (i, i+1) 進行配對競賽。</li>
<li><strong>勝負判斷</strong>: 取出 $a, b, c, d$ 四個值。<strong>注意</strong>：計算 $a \times b$ 和 $c \times d$ 時必須使用 <code>long long int</code> 以避免溢位。</li>
<li><strong>更新數值</strong>: 根據 $a \times b \ge c \times d$ 的結果，按照題目規則計算勝者和敗者的新戰力與新應變力。</li>
<li><strong>分組</strong>: 將更新後的勝者資訊 (敗場數不變) <code>push_back</code> 到 <code>win</code> 向量；將更新後的敗者資訊 (敗場數 +1) <code>push_back</code> 到 <code>lose</code> 向量。</li>
</ul>
</li>
<li><strong>處理奇數人數</strong>:<ul>
<li>在 <code>for</code> 迴圈結束後，檢查 <code>info.size()</code> 是否為奇數。</li>
<li>如果是奇數，表示最後一個人 (<code>info[info.size()-1]</code>) 烙單，將他<strong>不經修改</strong>地 <code>push_back</code> 到 <code>win</code> 向量，直接晉級。</li>
</ul>
</li>
<li><strong>重組下一輪名單</strong>:<ul>
<li>將 <code>info</code> 向量更新為 <code>win</code> 向量 (即 <code>info = win;</code>)。</li>
<li>接著遍歷 <code>lose</code> 向量。</li>
<li>對於 <code>lose</code> 中的每一個人，檢查其敗場數 (<code>lose[i][3]</code>)。如果<strong>不等於</strong> <code>m</code> (即未達淘汰標準)，則將他 <code>push_back</code> 到 <code>info</code> 向量的尾端。</li>
</ul>
</li>
<li><strong>輸出贏家</strong>:<ul>
<li>當 <code>while</code> 迴圈結束時，<code>info</code> 向量中只會剩下一個元素 (即最終贏家)。</li>
<li>輸出這位贏家的編號 <code>info[0][2]</code>。</li>
</ul>
</li>
</ol>
<h2 id="分段步驟程式碼-1"><a href="#分段步驟程式碼-1" class="headerlink" title="分段步驟程式碼"></a>分段步驟程式碼</h2><h3 id="讀取-N-M-與-S-T-陣列"><a href="#讀取-N-M-與-S-T-陣列" class="headerlink" title="讀取 N, M 與 S, T 陣列"></a>讀取 N, M 與 S, T 陣列</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,m,idx;</span><br><span class="line">cin &gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">S</span><span class="params">(n)</span>, <span class="title">T</span><span class="params">(n)</span></span>;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">info</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">4</span>,<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    cin &gt;&gt; S[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    cin &gt;&gt; T[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這段程式碼讀取 <code>n</code>、<code>m</code>，並初始化 <code>S</code>、<code>T</code> 陣列來儲存所有人的初始戰力與應變力。同時初始化 <code>info</code> 向量準備存放參賽者資訊。</p>
<h3 id="初始化比賽序列-info"><a href="#初始化比賽序列-info" class="headerlink" title="初始化比賽序列 info"></a>初始化比賽序列 info</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    cin &gt;&gt; idx;</span><br><span class="line">    info[i][<span class="number">0</span>]=S[idx<span class="number">-1</span>]; <span class="comment">// 根據編號 (idx-1) 填入 S</span></span><br><span class="line">    info[i][<span class="number">1</span>]=T[idx<span class="number">-1</span>]; <span class="comment">// 根據編號 (idx-1) 填入 T</span></span><br><span class="line">    info[i][<span class="number">2</span>]=idx;      <span class="comment">// 填入原始編號</span></span><br><span class="line">    <span class="comment">// info[i][3] (敗場數) 已被初始化為 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這段程式碼讀取初始的排列順序，並依照順序將每個人的 S, T, 編號, 初始敗場(0) 填入 <code>info</code> 向量中。</p>
<h3 id="模擬比賽主迴圈"><a href="#模擬比賽主迴圈" class="headerlink" title="模擬比賽主迴圈"></a>模擬比賽主迴圈</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(info.<span class="built_in">size</span>()!=<span class="number">1</span>)&#123;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; win,lose;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (內部迴圈 - 兩兩配對)</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// (處理奇數人數)</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// (重組名單)</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這是比賽的主迴圈，只要參賽人數不為 1，就繼續進行新的一輪。每輪開始時，都會建立新的 <code>win</code> 和 <code>lose</code> 暫存向量。</p>
<h3 id="兩兩配對競賽與更新"><a href="#兩兩配對競賽與更新" class="headerlink" title="兩兩配對競賽與更新"></a>兩兩配對競賽與更新</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i+<span class="number">1</span>&lt;info.<span class="built_in">size</span>();i+=<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="comment">// 使用 long long 避免 ab 和 cd 相乘溢位</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> a=info[i][<span class="number">0</span>],b=info[i][<span class="number">1</span>],c=info[i+<span class="number">1</span>][<span class="number">0</span>],d=info[i+<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(a*b&gt;=c*d)&#123;</span><br><span class="line">        <span class="comment">// info[i] 獲勝</span></span><br><span class="line">        win.<span class="built_in">push_back</span> (&#123;a+c*d/(<span class="number">2</span>*b),b+c*d/(<span class="number">2</span>*a),info[i][<span class="number">2</span>],info[i][<span class="number">3</span>]&#125;);</span><br><span class="line">        <span class="comment">// info[i+1] 戰敗</span></span><br><span class="line">        lose.<span class="built_in">push_back</span>(&#123;c+c/<span class="number">2</span>,d+d/<span class="number">2</span>,info[i+<span class="number">1</span>][<span class="number">2</span>],info[i+<span class="number">1</span>][<span class="number">3</span>]+<span class="number">1</span>&#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// info[i+1] 獲勝</span></span><br><span class="line">        win.<span class="built_in">push_back</span> (&#123;c+a*b/(<span class="number">2</span>*d),d+a*b/(<span class="number">2</span>*c),info[i+<span class="number">1</span>][<span class="number">2</span>],info[i+<span class="number">1</span>][<span class="number">3</span>]&#125;);</span><br><span class="line">        <span class="comment">// info[i] 戰敗</span></span><br><span class="line">        lose.<span class="built_in">push_back</span>(&#123;a+a/<span class="number">2</span>,b+b/<span class="number">2</span>,info[i][<span class="number">2</span>],info[i][<span class="number">3</span>]+<span class="number">1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這段程式碼遍歷當前的 <code>info</code> 列表，兩兩一組 (i, i+1) 進行比賽。根據 $a \times b$ 和 $c \times d$ 的比較結果，計算並更新雙方的數值，勝者放入 <code>win</code>，敗者敗場+1 後放入 <code>lose</code>。</p>
<h3 id="處理烙單與重組名單"><a href="#處理烙單與重組名單" class="headerlink" title="處理烙單與重組名單"></a>處理烙單與重組名單</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(info.<span class="built_in">size</span>()%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">// 奇數人數，最後一人 (info[info.size()-1]) 直接晉級</span></span><br><span class="line">    win.<span class="built_in">push_back</span>(info[info.<span class="built_in">size</span>()<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">info = win; <span class="comment">// 勝利組成為新名單的前半部</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;lose.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(lose[i][<span class="number">3</span>]!=m)&#123;</span><br><span class="line">        <span class="comment">// 敗場未達 m 的人，接在勝利組後面</span></span><br><span class="line">        info.<span class="built_in">push_back</span>(lose[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這段程式碼首先檢查是否有烙單的人，有則直接加入 <code>win</code>。然後，將 <code>info</code> 更新為 <code>win</code>（勝利組），接著遍歷 <code>lose</code> 列表，將未被淘汰 (敗場 <code>!= m</code>) 的人加回 <code>info</code> 的尾端，形成下一輪的比賽名單。</p>
<h3 id="輸出最終贏家"><a href="#輸出最終贏家" class="headerlink" title="輸出最終贏家"></a>輸出最終贏家</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout&lt;&lt;info[<span class="number">0</span>][<span class="number">2</span>];</span><br></pre></td></tr></table></figure>

<p>當 <code>while</code> 迴圈結束時，<code>info</code> 向量中只會剩下一個元素，即 <code>info[0]</code>。我們輸出其編號 <code>info[0][2]</code>。</p>
<h2 id="完整程式碼-1"><a href="#完整程式碼-1" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m,idx;</span><br><span class="line">    cin &gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">S</span><span class="params">(n)</span>, <span class="title">T</span><span class="params">(n)</span></span>;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">info</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">4</span>,<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; S[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; T[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; idx;</span><br><span class="line">        info[i][<span class="number">0</span>]=S[idx<span class="number">-1</span>];</span><br><span class="line">        info[i][<span class="number">1</span>]=T[idx<span class="number">-1</span>];</span><br><span class="line">        info[i][<span class="number">2</span>]=idx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(info.<span class="built_in">size</span>()!=<span class="number">1</span>)&#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; win,lose;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i+<span class="number">1</span>&lt;info.<span class="built_in">size</span>();i+=<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> a=info[i][<span class="number">0</span>],b=info[i][<span class="number">1</span>],c=info[i+<span class="number">1</span>][<span class="number">0</span>],d=info[i+<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(a*b&gt;=c*d)&#123;</span><br><span class="line">                win.<span class="built_in">push_back</span> (&#123;a+c*d/(<span class="number">2</span>*b),b+c*d/(<span class="number">2</span>*a),info[i][<span class="number">2</span>],info[i][<span class="number">3</span>]&#125;);</span><br><span class="line">                lose.<span class="built_in">push_back</span>(&#123;c+c/<span class="number">2</span>,d+d/<span class="number">2</span>,info[i+<span class="number">1</span>][<span class="number">2</span>],info[i+<span class="number">1</span>][<span class="number">3</span>]+<span class="number">1</span>&#125;);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                win.<span class="built_in">push_back</span> (&#123;c+a*b/(<span class="number">2</span>*d),d+a*b/(<span class="number">2</span>*c),info[i+<span class="number">1</span>][<span class="number">2</span>],info[i+<span class="number">1</span>][<span class="number">3</span>]&#125;);</span><br><span class="line">                lose.<span class="built_in">push_back</span>(&#123;a+a/<span class="number">2</span>,b+b/<span class="number">2</span>,info[i][<span class="number">2</span>],info[i][<span class="number">3</span>]+<span class="number">1</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(info.<span class="built_in">size</span>()%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">            win.<span class="built_in">push_back</span>(info[info.<span class="built_in">size</span>()<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        info = win;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;lose.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(lose[i][<span class="number">3</span>]!=m)&#123;</span><br><span class="line">                info.<span class="built_in">push_back</span>(lose[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;info[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

            </div>

            

            

            
                <div class="article-nav">
                    
                    
                        <div class="article-next">
                            <a class="next"
                               rel="next"
                               href="/2025/09/07/APCS/APCS-2022-06/"
                            >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">APCS-2022-06</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                                <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                            </a>
                        </div>
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E7%A8%8B%E5%BC%8F%E4%BA%A4%E6%98%93"><span class="nav-text">1. 程式交易</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E9%A1%8C%E6%AD%A5%E9%A9%9F"><span class="nav-text">解題步驟</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%AE%B5%E6%AD%A5%E9%A9%9F%E7%A8%8B%E5%BC%8F%E7%A2%BC"><span class="nav-text">分段步驟程式碼</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%80%E5%8F%96%E8%BC%B8%E5%85%A5%E8%B3%87%E6%96%99"><span class="nav-text">讀取輸入資料</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BA%A4%E6%98%93%E7%8B%80%E6%85%8B"><span class="nav-text">初始化交易狀態</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%93%AC%E4%BA%A4%E6%98%93%E9%81%8E%E7%A8%8B"><span class="nav-text">模擬交易過程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BC%B8%E5%87%BA%E7%B8%BD%E5%88%A9%E6%BD%A4"><span class="nav-text">輸出總利潤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%A8%8B%E5%BC%8F%E7%A2%BC"><span class="nav-text">完整程式碼</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E8%B4%8F%E5%AE%B6%E9%A0%90%E6%B8%AC"><span class="nav-text">2. 贏家預測</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E9%A1%8C%E6%AD%A5%E9%A9%9F-1"><span class="nav-text">解題步驟</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%AE%B5%E6%AD%A5%E9%A9%9F%E7%A8%8B%E5%BC%8F%E7%A2%BC-1"><span class="nav-text">分段步驟程式碼</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%80%E5%8F%96-N-M-%E8%88%87-S-T-%E9%99%A3%E5%88%97"><span class="nav-text">讀取 N, M 與 S, T 陣列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%AF%94%E8%B3%BD%E5%BA%8F%E5%88%97-info"><span class="nav-text">初始化比賽序列 info</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%93%AC%E6%AF%94%E8%B3%BD%E4%B8%BB%E8%BF%B4%E5%9C%88"><span class="nav-text">模擬比賽主迴圈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A9%E5%85%A9%E9%85%8D%E5%B0%8D%E7%AB%B6%E8%B3%BD%E8%88%87%E6%9B%B4%E6%96%B0"><span class="nav-text">兩兩配對競賽與更新</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%95%E7%90%86%E7%83%99%E5%96%AE%E8%88%87%E9%87%8D%E7%B5%84%E5%90%8D%E5%96%AE"><span class="nav-text">處理烙單與重組名單</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BC%B8%E5%87%BA%E6%9C%80%E7%B5%82%E8%B4%8F%E5%AE%B6"><span class="nav-text">輸出最終贏家</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%A8%8B%E5%BC%8F%E7%A2%BC-1"><span class="nav-text">完整程式碼</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                                                        
                            </div>

                        </div>

                        <div class="page-main-content-bottom">
                            
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
                <span>2020</span> -
            
            2025
            
                <!-- &nbsp;<i class="fas fa-heart icon-animate"></i> -->
                &nbsp;<a href="/">Aura</a>
            
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>  
        </div>
        <!-- v3.6.1 -->
        
        
    </div>
</footer>

                        </div>
                    </div>

                    
                        <div class="post-tools">
                            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

                        </div>
                        

                            <div class="right-bottom-side-tools">
                                <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

                            </div>

                            <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


                                
                                    <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

                                        

    </main>
<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/dark-light-toggle.js"></script>




    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/code-block.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/lazyload.js"></script>


<div class="post-scripts">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/post-helper.js"></script>
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/libs/anime.min.js"></script>
        
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/toc.js"></script>
        
    
</div>



</body>
</html>
